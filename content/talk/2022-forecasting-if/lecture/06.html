<!DOCTYPE html>
<html lang="en"><head>
<script src="06_files/libs/clipboard/clipboard.min.js"></script>
<script src="06_files/libs/quarto-html/tabby.min.js"></script>
<script src="06_files/libs/quarto-html/popper.min.js"></script>
<script src="06_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="06_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="06_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="06_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.237">

  <meta name="author" content="Ігор Мірошниченко">
  <meta name="dcterms.date" content="2022-10-25">
  <title>06 - Базові інструменти прогнозування</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="06_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="06_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #e1e4e8; background-color: #24292e; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #e1e4e8; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #f97583; } /* Attribute */
    code span.bn { color: #79b8ff; } /* BaseN */
    code span.bu { color: #f97583; } /* BuiltIn */
    code span.cf { color: #f97583; } /* ControlFlow */
    code span.ch { color: #9ecbff; } /* Char */
    code span.cn { color: #79b8ff; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #f97583; } /* DataType */
    code span.dv { color: #79b8ff; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #f97583; font-weight: bold; } /* Extension */
    code span.fl { color: #79b8ff; } /* Float */
    code span.fu { color: #b392f0; } /* Function */
    code span.im { color: #9ecbff; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #f97583; } /* Keyword */
    code span.op { color: #e1e4e8; } /* Operator */
    code span.ot { color: #b392f0; } /* Other */
    code span.pp { color: #f97583; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #79b8ff; } /* SpecialChar */
    code span.ss { color: #9ecbff; } /* SpecialString */
    code span.st { color: #9ecbff; } /* String */
    code span.va { color: #ffab70; } /* Variable */
    code span.vs { color: #9ecbff; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="06_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="06_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="06_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="06_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="06_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="06_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="06_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  
  <script src="06_files/libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="06_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">06 - Базові інструменти прогнозування</h1>
  <p class="subtitle">Прогнозування часових рядів</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Ігор Мірошниченко 
</div>
        <p class="quarto-title-affiliation">
            КНЕУ::ІІТЕ
          </p>
    </div>
</div>

  <p class="date">10/25/22</p>
</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">ЗМІСТ</h2>
<ul>
<li><a href="#/процес-охайного-tidy-прогнозування" id="/toc-процес-охайного-tidy-прогнозування">Процес охайного (tidy) прогнозування</a></li>
<li><a href="#/прості-методи-прогнозування" id="/toc-прості-методи-прогнозування">Прості методи прогнозування</a></li>
<li><a href="#/діагностика-залишків-моделей" id="/toc-діагностика-залишків-моделей">Діагностика залишків моделей</a></li>
<li><a href="#/портманто-тести" id="/toc-портманто-тести">Портманто-тести</a></li>
<li><a href="#/прогнозування-з-перетвореннями" id="/toc-прогнозування-з-перетвореннями">Прогнозування з перетвореннями</a></li>
<li><a href="#/прогнозування-та-декмпозиція" id="/toc-прогнозування-та-декмпозиція">Прогнозування та декмпозиція</a></li>
<li><a href="#/оцінювання-точності-прогнозів" id="/toc-оцінювання-точності-прогнозів">Оцінювання точності прогнозів</a></li>
<li><a href="#/крос-валідація-у-часових-рядах" id="/toc-крос-валідація-у-часових-рядах">Крос-валідація у часових рядах</a></li>
</ul>
</nav>
</section>
<section>
<section id="процес-охайного-tidy-прогнозування" class="title-slide slide level1 center">
<h1>Процес охайного (tidy) прогнозування</h1>

</section>
<section id="етапи" class="slide level2">
<h2>Етапи</h2>
<p>Процес можна розбити на такі етапи:</p>
<ol type="1">
<li><p>Підготовка даних</p></li>
<li><p>Візуалізація</p></li>
<li><p>Специфікація моделі</p></li>
<li><p>Оцінювання параметрів моделі</p></li>
<li><p>Оцінювання якості та точності</p></li>
<li><p>Побудова прогнозів</p></li>
</ol>

<img data-src="06_files/figure-revealjs/unnamed-chunk-1-1.png" width="960" class="r-stretch"></section>
<section id="tidy-підготовка" class="slide level2">
<h2>Tidy-підготовка</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>gdppc <span class="ot">&lt;-</span> global_economy <span class="sc">%&gt;%</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>  <span class="fu">mutate</span>(<span class="at">GDP_per_capita =</span> GDP<span class="sc">/</span>Population) <span class="sc">%&gt;%</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="fu">select</span>(Year, Country, GDP, Population, GDP_per_capita)</span>
<span id="cb1-4"><a href="#cb1-4"></a>gdppc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tsibble: 15,150 x 5 [1Y]
# Key:       Country [263]
    Year Country             GDP Population GDP_per_capita
   &lt;dbl&gt; &lt;fct&gt;             &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;
 1  1960 Afghanistan  537777811.    8996351           59.8
 2  1961 Afghanistan  548888896.    9166764           59.9
 3  1962 Afghanistan  546666678.    9345868           58.5
 4  1963 Afghanistan  751111191.    9533954           78.8
 5  1964 Afghanistan  800000044.    9731361           82.2
 6  1965 Afghanistan 1006666638.    9938414          101. 
 7  1966 Afghanistan 1399999967.   10152331          138. 
 8  1967 Afghanistan 1673333418.   10372630          161. 
 9  1968 Afghanistan 1373333367.   10604346          130. 
10  1969 Afghanistan 1408888922.   10854428          130. 
# … with 15,140 more rows</code></pre>
</div>
</div>
</section>
<section id="візуалізація" class="slide level2">
<h2>Візуалізація</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>gdppc <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="fu">filter</span>(Country<span class="sc">==</span><span class="st">"Sweden"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="fu">autoplot</span>(GDP_per_capita) <span class="sc">+</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ВВП на душу населення у Швеції"</span>, <span class="at">y =</span> <span class="st">"$США"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-3-1.png" width="960" class="r-stretch"></section>
<section id="оцінка-моделі" class="slide level2">
<h2>Оцінка моделі</h2>
<p>Функція <code>model</code> навчає модель на обраних даних</p>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>fit <span class="ot">&lt;-</span> gdppc <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">model</span>(<span class="at">trend_model =</span> <span class="fu">TSLM</span>(GDP_per_capita <span class="sc">~</span> <span class="fu">trend</span>()))</span>
<span id="cb4-3"><a href="#cb4-3"></a>fit <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A mable: 3 x 2
# Key:     Country [3]
  Country     trend_model
  &lt;fct&gt;           &lt;model&gt;
1 Afghanistan      &lt;TSLM&gt;
2 Albania          &lt;TSLM&gt;
3 Algeria          &lt;TSLM&gt;</code></pre>
</div>
</div>
<p><code>mable</code> - це таблиця моделей, де кожен запис відповідає за конктретну підігнану модель</p>
</section>
<section id="прогнозування" class="slide level2">
<h2>Прогнозування</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>fit <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">"3 years"</span>) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A fable: 7 x 5 [1Y]
# Key:     Country, .model [3]
  Country     .model       Year  GDP_per_capita .mean
  &lt;fct&gt;       &lt;chr&gt;       &lt;dbl&gt;          &lt;dist&gt; &lt;dbl&gt;
1 Afghanistan trend_model  2018    N(526, 9653)  526.
2 Afghanistan trend_model  2019    N(534, 9689)  534.
3 Afghanistan trend_model  2020    N(542, 9727)  542.
4 Albania     trend_model  2018 N(4716, 476419) 4716.
5 Albania     trend_model  2019 N(4867, 481086) 4867.
6 Albania     trend_model  2020 N(5018, 486012) 5018.
7 Algeria     trend_model  2018 N(4410, 643094) 4410.</code></pre>
</div>
</div>
<p><code>fable</code> - таблиця прогнозів з точковими та інтервальними прогнозами.</p>
</section>
<section id="візуалізація-прогнозів" class="slide level2">
<h2>Візуалізація прогнозів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>fit <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">"3 years"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"Sweden"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="fu">autoplot</span>(gdppc) <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ВВП на душу населення у Швеції"</span>, <span class="at">y =</span> <span class="st">"$США"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-6-1.png" width="960" class="r-stretch"></section></section>
<section>
<section id="прості-методи-прогнозування" class="title-slide slide level1 center">
<h1>Прості методи прогнозування</h1>

</section>
<section id="meany-метод-на-основі-середнього" class="slide level2">
<h2><code>MEAN(y)</code>: Метод на основі середнього</h2>
<ul>
<li><p>Прогноз усіх майбутніх значень дорівнює середньому з вибірки <span class="math inline">\(\{y_1,\dots,y_T\}\)</span>.</p></li>
<li><p>Прогнози: <span class="math inline">\(\hat{y}_{T+h|T} = \bar{y} = (y_1+\dots+y_T)/T\)</span></p></li>
</ul>

<img data-src="06_files/figure-revealjs/unnamed-chunk-7-1.png" width="960" class="r-stretch"></section>
<section id="naivey-наївний-метод" class="slide level2">
<h2><code>NAIVE(y)</code>: Наївний метод</h2>
<ul>
<li><p>Прогноз дорівнює останньому значенню з вибірки.</p></li>
<li><p>Прогнози: <span class="math inline">\(\hat{y}_{T+h|T} =y_T\)</span>.</p></li>
</ul>

<img data-src="06_files/figure-revealjs/unnamed-chunk-8-1.png" width="960" class="r-stretch"></section>
<section id="snaivey-lagm-сезонний-наївний-метод" class="slide level2">
<h2><code>SNAIVE(y ~ lag(m))</code>: Сезонний наївний метод</h2>
<ul>
<li><p>Прогнози дорівнюють останньому значенню минулого сезону.</p></li>
<li><p>Прогнози: <span class="math inline">\(\hat{y}_{T+h|T} =y_{T+hm(k+1)}\)</span>, де <span class="math inline">\(m=\)</span> сезонний період, а <span class="math inline">\(k\)</span> – ціла частина <span class="math inline">\((h -1)/m\)</span>.</p></li>
</ul>

<img data-src="06_files/figure-revealjs/unnamed-chunk-9-1.png" width="960" class="r-stretch"></section>
<section id="rwy-drift-дріфтовий-метод" class="slide level2">
<h2><code>RW(y ~ drift())</code>: Дріфтовий метод</h2>
<ul>
<li><p>Прогноз дорівнює останньому значенню плюс середня зміна.</p></li>
<li><p>Прогнози:</p></li>
</ul>
<p><span class="math display">\[\hat{y}_{T+h|T} =  y_{T} + \frac{h}{T-1}\sum_{t=2}^T (y_t-y_{t-1})\\
                 = y_T + \frac{h}{T-1}(y_T -y_1)\]</span></p>
<ul>
<li>Еквівалентно екстраполяції лінії, проведеної між першим і останнім спостереженнями.</li>
</ul>
</section>
<section id="rwy-drift-дріфтовий-метод-1" class="slide level2">
<h2><code>RW(y ~ drift())</code>: Дріфтовий метод</h2>

<img data-src="06_files/figure-revealjs/unnamed-chunk-10-1.png" width="960" class="r-stretch"></section>
<section id="оцінювання-моделі" class="slide level2">
<h2>Оцінювання моделі</h2>
<p>Функція <code>model</code> навчає модель на обраних даних</p>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>brick_fit <span class="ot">&lt;-</span>  aus_production <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Bricks)) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="fu">model</span>(</span>
<span id="cb9-4"><a href="#cb9-4"></a>    <span class="at">Seasonal_naive =</span> <span class="fu">SNAIVE</span>(Bricks),</span>
<span id="cb9-5"><a href="#cb9-5"></a>    <span class="at">Naive =</span> <span class="fu">NAIVE</span>(Bricks),</span>
<span id="cb9-6"><a href="#cb9-6"></a>    <span class="at">Drift =</span> <span class="fu">RW</span>(Bricks <span class="sc">~</span> <span class="fu">drift</span>()),</span>
<span id="cb9-7"><a href="#cb9-7"></a>    <span class="at">Mean =</span> <span class="fu">MEAN</span>(Bricks)</span>
<span id="cb9-8"><a href="#cb9-8"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell light-mode">
<div class="cell-output cell-output-stdout">
<pre><code># A mable: 1 x 4
  Seasonal_naive   Naive         Drift    Mean
         &lt;model&gt; &lt;model&gt;       &lt;model&gt; &lt;model&gt;
1       &lt;SNAIVE&gt; &lt;NAIVE&gt; &lt;RW w/ drift&gt;  &lt;MEAN&gt;</code></pre>
</div>
</div>
</section>
<section id="побудова-прогнозів" class="slide level2">
<h2>Побудова прогнозів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>brick_fc <span class="ot">&lt;-</span> brick_fit <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">"5 years"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell light-mode">
<div class="cell-output cell-output-stdout">
<pre><code># A fable: 80 x 4 [1Q]
# Key:     .model [4]
   .model         Quarter       Bricks .mean
   &lt;chr&gt;            &lt;qtr&gt;       &lt;dist&gt; &lt;dbl&gt;
 1 Seasonal_naive 2005 Q3 N(428, 2336)   428
 2 Seasonal_naive 2005 Q4 N(397, 2336)   397
 3 Seasonal_naive 2006 Q1 N(355, 2336)   355
 4 Seasonal_naive 2006 Q2 N(435, 2336)   435
 5 Seasonal_naive 2006 Q3 N(428, 4672)   428
 6 Seasonal_naive 2006 Q4 N(397, 4672)   397
 7 Seasonal_naive 2007 Q1 N(355, 4672)   355
 8 Seasonal_naive 2007 Q2 N(435, 4672)   435
 9 Seasonal_naive 2007 Q3 N(428, 7008)   428
10 Seasonal_naive 2007 Q4 N(397, 7008)   397
# … with 70 more rows</code></pre>
</div>
</div>
</section>
<section id="візуалізація-прогнозів-1" class="slide level2">
<h2>Візуалізація прогнозів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>brick_fc <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">autoplot</span>(aus_production, <span class="at">level =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Clay brick production in Australia"</span>,</span>
<span id="cb13-4"><a href="#cb13-4"></a>       <span class="at">y =</span> <span class="st">"Millions of bricks"</span>) <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>  <span class="fu">guides</span>(<span class="at">colour =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Forecast"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-15-1.png" width="960" class="r-stretch"></section>
<section id="ціна-акцій-facebook-на-закриття" class="slide level2">
<h2>Ціна акцій Facebook на закриття</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># Дані для навчання моделі</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>fb_stock <span class="ot">&lt;-</span> gafa_stock <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>  <span class="fu">filter</span>(Symbol <span class="sc">==</span> <span class="st">"FB"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>  <span class="fu">mutate</span>(<span class="at">trading_day =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>  <span class="fu">update_tsibble</span>(<span class="at">index=</span>trading_day, <span class="at">regular=</span><span class="cn">TRUE</span>)</span>
<span id="cb14-6"><a href="#cb14-6"></a></span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="co"># Побудова, оцінювання і прогнозування</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>fb_stock <span class="sc">%&gt;%</span></span>
<span id="cb14-9"><a href="#cb14-9"></a>  <span class="fu">model</span>(</span>
<span id="cb14-10"><a href="#cb14-10"></a>    <span class="at">Mean =</span> <span class="fu">MEAN</span>(Close),</span>
<span id="cb14-11"><a href="#cb14-11"></a>    <span class="at">Naive =</span> <span class="fu">NAIVE</span>(Close),</span>
<span id="cb14-12"><a href="#cb14-12"></a>    <span class="at">Drift =</span> <span class="fu">RW</span>(Close <span class="sc">~</span> <span class="fu">drift</span>())</span>
<span id="cb14-13"><a href="#cb14-13"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-14"><a href="#cb14-14"></a>  <span class="fu">forecast</span>(<span class="at">h=</span><span class="dv">42</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-15"><a href="#cb14-15"></a>  <span class="fu">autoplot</span>(fb_stock, <span class="at">level =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb14-16"><a href="#cb14-16"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Facebook closing stock price"</span>, <span class="at">y=</span><span class="st">"$US"</span>) <span class="sc">+</span></span>
<span id="cb14-17"><a href="#cb14-17"></a>  <span class="fu">guides</span>(<span class="at">colour=</span><span class="fu">guide_legend</span>(<span class="at">title=</span><span class="st">"Forecast"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ціна-акцій-facebook-на-закриття-1" class="slide level2">
<h2>Ціна акцій Facebook на закриття</h2>

<img data-src="06_files/figure-revealjs/unnamed-chunk-16-1.png" width="960" class="r-stretch"></section></section>
<section>
<section id="діагностика-залишків-моделей" class="title-slide slide level1 center">
<h1>Діагностика залишків моделей</h1>

</section>
<section id="модельні-значення-fitted-values" class="slide level2">
<h2>Модельні значення (<em>fitted values</em>)</h2>
<ul>
<li><span class="math inline">\(\hat{y}_{t|t-1}\)</span> – це прогноз <span class="math inline">\(y_t\)</span> на основі спостережень <span class="math inline">\(y_1,\dots,y_{t-1}\)</span>.</li>
<li>Ми називаємо це «модельними значеннями» (<em>fitted values</em>).</li>
<li>Часто прогнози не відповідають дійсності, оскільки параметри оцінюються за всіма даними.</li>
</ul>
<h3 id="наприклад">Наприклад:</h3>
<ul>
<li><span class="math inline">\(\hat{y}_{t} = \bar{y}\)</span> для середнього методу.</li>
<li><span class="math inline">\(\hat{y}_{t} = y_{t-1} + (y_{T}-y_1)/(T-1)\)</span> для методу дріфту.</li>
</ul>
</section>
<section id="залишки-моделей" class="slide level2">
<h2>Залишки моделей</h2>
<p><strong>Залишки в прогнозуванні:</strong> різниця між спостережуваним модельними значеннями: <span class="math inline">\(e_t = y_t-\hat{y}_{t|t-1}\)</span></p>
<p><strong>Припущення:</strong> 1. <span class="math inline">\(\{e_t\}\)</span> некорельовані. Якщо вони ні, то інформація залишається в залишках, які слід використовувати при обчисленні прогнозів. 2. <span class="math inline">\(\{e_t\}\)</span> мають середнє нульове значення. Якщо ні, то прогнози мають зміщення.</p>
<p><strong>Корисні властивості</strong> (для розподілів та довірчих інтервалів): 3. <span class="math inline">\(\{e_t\}\)</span> мають постійну дисперсію. 4. <span class="math inline">\(\{e_t\}\)</span> мають нормальний розподіл.</p>
</section>
<section id="ціна-акцій-facebook-на-закриття-2" class="slide level2">
<h2>Ціна акцій Facebook на закриття</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>fb_stock <span class="ot">&lt;-</span> gafa_stock <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">filter</span>(Symbol <span class="sc">==</span> <span class="st">"FB"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="fu">mutate</span>(<span class="at">trading_day =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>  <span class="fu">update_tsibble</span>(<span class="at">index =</span> trading_day, <span class="at">regular =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-5"><a href="#cb15-5"></a>fb_stock <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(Close)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-17-1.png" width="960" class="r-stretch"></section>
<section id="ціна-акцій-facebook-на-закриття-3" class="slide level2">
<h2>Ціна акцій Facebook на закриття</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>fit <span class="ot">&lt;-</span> fb_stock <span class="sc">%&gt;%</span> <span class="fu">model</span>(<span class="fu">NAIVE</span>(Close))</span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="fu">augment</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tsibble: 1,258 x 7 [1]
# Key:       Symbol, .model [1]
   Symbol .model       trading_day Close .fitted .resid .innov
   &lt;chr&gt;  &lt;chr&gt;              &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 FB     NAIVE(Close)           1  54.7    NA   NA     NA    
 2 FB     NAIVE(Close)           2  54.6    54.7 -0.150 -0.150
 3 FB     NAIVE(Close)           3  57.2    54.6  2.64   2.64 
 4 FB     NAIVE(Close)           4  57.9    57.2  0.720  0.720
 5 FB     NAIVE(Close)           5  58.2    57.9  0.310  0.310
 6 FB     NAIVE(Close)           6  57.2    58.2 -1.01  -1.01 
 7 FB     NAIVE(Close)           7  57.9    57.2  0.720  0.720
 8 FB     NAIVE(Close)           8  55.9    57.9 -2.03  -2.03 
 9 FB     NAIVE(Close)           9  57.7    55.9  1.83   1.83 
10 FB     NAIVE(Close)          10  57.6    57.7 -0.140 -0.140
# … with 1,248 more rows</code></pre>
</div>
</div>
</section>
<section id="ціна-акцій-facebook-на-закриття-4" class="slide level2">
<h2>Ціна акцій Facebook на закриття</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">augment</span>(fit) <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> trading_day)) <span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Close, <span class="at">colour =</span> <span class="st">"Data"</span>)) <span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> .fitted, <span class="at">colour =</span> <span class="st">"Fitted"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-19-1.png" width="960" class="r-stretch"></section>
<section id="ціна-акцій-facebook-на-закриття-5" class="slide level2">
<h2>Ціна акцій Facebook на закриття</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">augment</span>(fit) <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">filter</span>(trading_day <span class="sc">&gt;</span> <span class="dv">1100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> trading_day)) <span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Close, <span class="at">colour =</span> <span class="st">"Data"</span>)) <span class="sc">+</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> .fitted, <span class="at">colour =</span> <span class="st">"Fitted"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-20-1.png" width="960" class="r-stretch"></section>
<section id="ціна-акцій-facebook-на-закриття-6" class="slide level2">
<h2>Ціна акцій Facebook на закриття</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">augment</span>(fit) <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">autoplot</span>(.resid) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"$US"</span>,</span>
<span id="cb20-4"><a href="#cb20-4"></a>       <span class="at">title =</span> <span class="st">"Residuals from naïve method"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-21-1.png" width="960" class="r-stretch"></section>
<section id="ціна-акцій-facebook-на-закриття-7" class="slide level2">
<h2>Ціна акцій Facebook на закриття</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">augment</span>(fit) <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .resid)) <span class="sc">+</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">150</span>) <span class="sc">+</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histogram of residuals"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-22-1.png" width="960" class="r-stretch"></section>
<section id="ціна-акцій-facebook-на-закриття-8" class="slide level2">
<h2>Ціна акцій Facebook на закриття</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">augment</span>(fit) <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">ACF</span>(.resid) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="fu">autoplot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ACF of residuals"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-23-1.png" width="960" class="r-stretch"></section>
<section id="функція-gg_tsresiduals" class="slide level2">
<h2>Функція <code>gg_tsresiduals()</code></h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">gg_tsresiduals</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-24-1.png" width="960" class="r-stretch"></section>
<section id="acf-залишків" class="slide level2">
<h2>ACF залишків</h2>
<ul>
<li><p>Ми припускаємо, що залишками є білим шумом (некорельований, середнє нульове значення, постійна дисперсія). Якщо вони ні, то в залишках залишається інформація, яку слід використовувати при обчисленні прогнозів.</p></li>
<li><p>Таким чином, стандартна діагностика залишків полягає в перевірці ACF залишків методу прогнозування.</p></li>
<li><p>Ми <em>очікуємо</em>, що вони виглядатимуть як білий шум.</p></li>
</ul>
</section></section>
<section>
<section id="портманто-тести" class="title-slide slide level1 center">
<h1>Портманто-тести</h1>

</section>
<section id="тест-бокса-пирса" class="slide level2">
<h2>Тест Бокса-Пирса</h2>
<p>Розглянемо <em>весь набір</em> значень <span class="math inline">\(r_{k}\)</span> і розробимо тест, щоб побачити, чи значно відрізняється набір від нульового набору.</p>
<p><span class="math display">\[Q = T \sum_{k=1}^\ell r_k^2\]</span> де <span class="math inline">\(\ell\)</span> – максимальний лаг, яке розглядається, а <span class="math inline">\(T\)</span> – кількість спостережень.</p>
<ul>
<li><p>Якщо кожен <span class="math inline">\(r_k\)</span> близький до нуля, <span class="math inline">\(Q\)</span> буде <strong>маленьким</strong>.</p></li>
<li><h2 id="якщо-деякі-значення-r_k-великі-позитивні-чи-негативні-q-буде-великими.">Якщо деякі значення <span class="math inline">\(r_k\)</span> великі (позитивні чи негативні), <span class="math inline">\(Q\)</span> буде <strong>великими</strong>.</h2></li>
</ul>
<blockquote>
<p>Мої вподобання: <span class="math inline">\(\ell=10\)</span> для несезонних даних, <span class="math inline">\(h=2m\)</span> для сезонних даних.</p>
</blockquote>
</section>
<section id="тест-бокса-пирса-1" class="slide level2">
<h2>Тест Бокса-Пирса</h2>
<ul>
<li>Якщо дані є БШ, <span class="math inline">\(Q^*\)</span> має <span class="math inline">\(\chi^2\)</span> розподіл із <span class="math inline">\((\ell - K)\)</span> ступенями свободи, де <span class="math inline">\(K=\)</span> к-ть параметрів у моделі.</li>
<li>При застосуванні до необроблених даних встановіть <span class="math inline">\(K=0\)</span>.</li>
<li><code>lag</code> <span class="math inline">\(= \ell\)</span>, <code>dof</code> <span class="math inline">\(= K\)</span></li>
</ul>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">augment</span>(fit) <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">features</span>(.resid, ljung_box, <span class="at">lag=</span><span class="dv">10</span>, <span class="at">dof=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  Symbol .model       lb_stat lb_pvalue
  &lt;chr&gt;  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;
1 FB     NAIVE(Close)    12.1     0.276</code></pre>
</div>
</div>
</section>
<section id="розподіл-прогнозів" class="slide level2">
<h2>Розподіл прогнозів</h2>
<ul>
<li><p>Прогноз <span class="math inline">\(\hat{y}_{T+h|T}\)</span> – це (зазвичай) середнє значення умовного розподілу <span class="math inline">\(y_{T+h} \mid y_1, \dots, y_{T}\)</span>.</p></li>
<li><p>Більшість моделей часових рядів дають нормально розподілені прогнози.</p></li>
<li><p>Розподіл прогнозу описує ймовірність спостереження будь-якого майбутнього значення.</p></li>
</ul>
</section>
<section id="розподіл-прогнозів-1" class="slide level2">
<h2>Розподіл прогнозів</h2>
<p>Припускаючи, що залишки нормальні, некорельовані, sd = <span class="math inline">\(\hat\sigma\)</span>:</p>
<p><strong>Модель середнього:</strong> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="math inline">\(\hat{y}_{T+h\|T} \sim N(\bar{y}, (1 + 1/T)\hat{\sigma}^2)\)</span></p>
<p><strong>Наївна модель:</strong> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="math inline">\(\hat{y}_{T+h\|T} \sim N(y_T, h\hat{\sigma}^2)\)</span></p>
<p><strong>Сезонна наївна модель:</strong> &nbsp; <span class="math inline">\(\hat{y}_{T+h\|T} \sim N(y_{T+h-m(k+1)}, (k+1)\hat{\sigma}^2)\)</span></p>
<p><strong>Модель дріфту:</strong> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="math inline">\(\hat{y}_{T+h\|T} \sim N(y_T + \frac{h}{T-1}(y_T - y_1),h\frac{T+h}{T}\hat{\sigma}^2)\)</span></p>
<p>де <span class="math inline">\(k\)</span> – ціла частина <span class="math inline">\((h-1)/m\)</span>.</p>
<p>Зауважте, що коли <span class="math inline">\(h=1\)</span> і <span class="math inline">\(T\)</span> великі, усі вони дають однакову приблизну дисперсію прогнозу: <span class="math inline">\(\hat{\sigma}^2\)</span>.</p>
</section>
<section id="довірчі-інтервали" class="slide level2">
<h2>Довірчі інтервали</h2>
<ul>
<li><p>Довірчий інтервал прогнозу дає область, в межах якої ми очікуємо, що <span class="math inline">\(y_{T+h}\)</span> буде лежати з заданою ймовірністю.</p></li>
<li><p>Якщо припустити, що помилки прогнозу розподіляються нормально, тоді 95% ДІ становить: <span class="math display">\[\hat{y}_{T+h|T} \pm 1.96 \hat\sigma_h\]</span> де <span class="math inline">\(\hat\sigma_h\)</span> - це стандартне відхилення <span class="math inline">\(h\)</span>-кроків розподілу.</p></li>
</ul>
</section>
<section id="довірчі-інтервали-1" class="slide level2">
<h2>Довірчі інтервали</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>brick_fc <span class="sc">%&gt;%</span> <span class="fu">hilo</span>(<span class="at">level =</span> <span class="dv">95</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell light-mode">
<div class="cell-output cell-output-stdout">
<pre><code># A tsibble: 80 x 5 [1Q]
# Key:       .model [4]
   .model         Quarter       Bricks .mean                  `95%`
   &lt;chr&gt;            &lt;qtr&gt;       &lt;dist&gt; &lt;dbl&gt;                 &lt;hilo&gt;
 1 Seasonal_naive 2005 Q3 N(428, 2336)   428 [333.2737, 522.7263]95
 2 Seasonal_naive 2005 Q4 N(397, 2336)   397 [302.2737, 491.7263]95
 3 Seasonal_naive 2006 Q1 N(355, 2336)   355 [260.2737, 449.7263]95
 4 Seasonal_naive 2006 Q2 N(435, 2336)   435 [340.2737, 529.7263]95
 5 Seasonal_naive 2006 Q3 N(428, 4672)   428 [294.0368, 561.9632]95
 6 Seasonal_naive 2006 Q4 N(397, 4672)   397 [263.0368, 530.9632]95
 7 Seasonal_naive 2007 Q1 N(355, 4672)   355 [221.0368, 488.9632]95
 8 Seasonal_naive 2007 Q2 N(435, 4672)   435 [301.0368, 568.9632]95
 9 Seasonal_naive 2007 Q3 N(428, 7008)   428 [263.9292, 592.0708]95
10 Seasonal_naive 2007 Q4 N(397, 7008)   397 [232.9292, 561.0708]95
# … with 70 more rows</code></pre>
</div>
</div>
</section>
<section id="довірчі-інтервали-2" class="slide level2">
<h2>Довірчі інтервали</h2>
<ul>
<li><p>Точкові прогнози не дають адекватної оцінки прогнозів без вимірювання невизначеності (наприклад, довірчих інтервалів).</p></li>
<li><p>Довірчі інтервали прогнозування вимагають стохастичної моделі (з випадковими залишками тощо).</p></li>
<li><p>Для більшості моделей довірчі інтервали прогнозування стають ширшими зі збільшенням горизонту прогнозу.</p></li>
<li><p>Використовуйте аргумент “рівень”, щоб контролювати покриття ДІ.</p></li>
<li><p>Перевірте залишки, перш ніж вірити їм.</p></li>
<li><p>Зазвичай ДІ занадто вузькі через невраховану невизначеність.</p></li>
</ul>
</section></section>
<section>
<section id="прогнозування-з-перетвореннями" class="title-slide slide level1 center">
<h1>Прогнозування з перетвореннями</h1>

</section>
<section id="моделювання-з-перетвореннями" class="slide level2">
<h2>Моделювання з перетвореннями</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>eggs <span class="ot">&lt;-</span> prices <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(eggs)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(eggs)</span>
<span id="cb28-3"><a href="#cb28-3"></a>eggs <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>() <span class="sc">+</span></span>
<span id="cb28-4"><a href="#cb28-4"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Annual egg prices"</span>, <span class="at">y=</span><span class="st">"$US (adjusted for inflation)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-28-1.png" width="960" class="r-stretch"></section>
<section id="моделювання-з-перетвореннями-1" class="slide level2">
<h2>Моделювання з перетвореннями</h2>
<p>Перетворення, використані до залежноъ змынноъ, будуть автоматично перетворені назад під час побудови моделі.</p>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>fit <span class="ot">&lt;-</span> eggs <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>  <span class="fu">model</span>(<span class="fu">RW</span>(<span class="fu">log</span>(eggs) <span class="sc">~</span> <span class="fu">drift</span>()))</span>
<span id="cb29-3"><a href="#cb29-3"></a>fit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A mable: 1 x 1
  `RW(log(eggs) ~ drift())`
                    &lt;model&gt;
1             &lt;RW w/ drift&gt;</code></pre>
</div>
</div>
</section>
<section id="прогнозування-з-перетвореннями-1" class="slide level2">
<h2>Прогнозування з перетвореннями</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>fc <span class="ot">&lt;-</span> fit <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">50</span>)</span>
<span id="cb31-3"><a href="#cb31-3"></a>fc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A fable: 50 x 4 [1Y]
# Key:     .model [1]
   .model                   year             eggs .mean
   &lt;chr&gt;                   &lt;dbl&gt;           &lt;dist&gt; &lt;dbl&gt;
 1 RW(log(eggs) ~ drift())  1994 t(N(4.1, 0.018))  61.8
 2 RW(log(eggs) ~ drift())  1995 t(N(4.1, 0.036))  61.4
 3 RW(log(eggs) ~ drift())  1996 t(N(4.1, 0.055))  61.0
 4 RW(log(eggs) ~ drift())  1997 t(N(4.1, 0.074))  60.6
 5 RW(log(eggs) ~ drift())  1998 t(N(4.1, 0.093))  60.2
 6 RW(log(eggs) ~ drift())  1999    t(N(4, 0.11))  59.8
 7 RW(log(eggs) ~ drift())  2000    t(N(4, 0.13))  59.4
 8 RW(log(eggs) ~ drift())  2001    t(N(4, 0.15))  59.0
 9 RW(log(eggs) ~ drift())  2002    t(N(4, 0.18))  58.6
10 RW(log(eggs) ~ drift())  2003     t(N(4, 0.2))  58.3
# … with 40 more rows</code></pre>
</div>
</div>
</section>
<section id="прогнозування-з-перетвореннями-2" class="slide level2">
<h2>Прогнозування з перетвореннями</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>fc <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(eggs) <span class="sc">+</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Annual egg prices"</span>,</span>
<span id="cb33-3"><a href="#cb33-3"></a>       <span class="at">y=</span><span class="st">"US$ (adjusted for inflation)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-31-1.png" width="960" class="r-stretch"></section>
<section id="корегування-зміщення-bais" class="slide level2">
<h2>Корегування зміщення (bais)</h2>
<ul>
<li><p>Точкові прогнози зі зворотним перетворенням є медіанами.</p></li>
<li><p>Довірчі інтервали для прогнозів зі зворотним перетворенням є правильними.</p></li>
</ul>
<p><strong>Зворотнє перетворення середнього</strong></p>
<p>Нехай <span class="math inline">\(X\)</span> має середнє значення <span class="math inline">\(\mu\)</span> і дисперсію <span class="math inline">\(\sigma^2\)</span>.</p>
<p>Нехай <span class="math inline">\(f(x)\)</span> — функція зворотного перетворення, а <span class="math inline">\(Y=f(X)\)</span>.</p>
<p>Розкладання ряду Тейлора про <span class="math inline">\(\mu\)</span>: <span class="math display">\[f(X) = f(\mu) + (X-\mu)f'(\mu) + \frac{1}{2}(X-\mu)^2f''(\mu).\]</span></p>
<p><span class="math display">\[E[Y] = E[f(X)] = f(\mu) + \frac12 \sigma^2 f''(\mu)\]</span></p>
</section>
<section id="корегування-зміщення-bais-1" class="slide level2">
<h2>Корегування зміщення (bais)</h2>
<p><strong>Зворотне перетворення Бокса-Кокса:</strong> <span class="math display">\[y_t = \left\{\begin{array}{ll}
        \exp(w_t)      &amp; \quad \lambda = 0; \\
        (\lambda W_t+1)^{1/\lambda}  &amp; \quad \lambda \ne 0.
\end{array}\right.\]</span></p>
<p><span class="math display">\[f(x) = \begin{cases}
                        e^x &amp; \quad\lambda=0;\\
                        (\lambda x + 1)^{1/\lambda} &amp; \quad\lambda\ne0.
\end{cases}\]</span></p>
<p><span class="math display">\[f(x) = \begin{cases}
                        e^x &amp; \quad\lambda=0;\\
                        (1-\lambda)(\lambda x + 1)^{1/\lambda-2} &amp; \quad\lambda\ne0.
\end{cases}\]</span></p>
<p><span class="math display">\[E[Y] = \begin{cases}
                        e^\mu\left[1+\frac{\sigma^2}{2}\right] &amp; \quad\lambda=0;\\
                        (\lambda \mu + 1)^{1/\lambda}\left[1+\frac{\sigma^2(1-\lambda)}{2(\lambda\mu+1)^2}\right] &amp; \quad\lambda\ne0.
\end{cases}\]</span></p>
</section>
<section id="корегування-зміщення-bais-2" class="slide level2">
<h2>Корегування зміщення (bais)</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>fc <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>  <span class="fu">autoplot</span>(eggs, <span class="at">level =</span> <span class="dv">80</span>, <span class="at">point_forecast =</span> <span class="fu">lst</span>(mean, median)) <span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Annual egg prices"</span>,</span>
<span id="cb34-4"><a href="#cb34-4"></a>       <span class="at">y=</span><span class="st">"US$ (adjusted for inflation)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-32-1.png" width="960" class="r-stretch"></section></section>
<section>
<section id="прогнозування-та-декмпозиція" class="title-slide slide level1 center">
<h1>Прогнозування та декмпозиція</h1>

</section>
<section id="постановка" class="slide level2">
<h2>Постановка</h2>
<p><span class="math display">\[y_t = \hat{S}_t + \hat{A}_t\]</span></p>
<ul>
<li><span class="math inline">\(\hat{A}_t\)</span> <strong>- созонно-скорегована компонента</strong></li>
<li><span class="math inline">\(\hat{S}_t\)</span> <strong>- сезонна компонента.</strong></li>
</ul>
<p>–</p>
<ul>
<li>Прогнозуємо <span class="math inline">\(\hat{S}_t\)</span> за допомогою SNAIVE.</li>
<li>Прогнозуємо <span class="math inline">\(\hat{A}_t\)</span> за допомогою несезонного методу часових рядів.</li>
<li>Об’єдуємо прогнози <span class="math inline">\(\hat{S}_t\)</span> і <span class="math inline">\(\hat{A}_t\)</span>, щоб отримати прогнози залежної змінної.</li>
</ul>
</section>
<section id="зайнятість-у-розрібній-торгівлі-сша" class="slide level2">
<h2>Зайнятість у розрібній торгівлі США</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>us_retail_employment <span class="ot">&lt;-</span> us_employment <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Month) <span class="sc">&gt;=</span> <span class="dv">1990</span>, Title <span class="sc">==</span> <span class="st">"Retail Trade"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="#cb35-3"></a>  <span class="fu">select</span>(<span class="sc">-</span>Series_ID)</span>
<span id="cb35-4"><a href="#cb35-4"></a>us_retail_employment</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tsibble: 357 x 3 [1M]
      Month Title        Employed
      &lt;mth&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 1990 янв Retail Trade   13256.
 2 1990 фев Retail Trade   12966.
 3 1990 мар Retail Trade   12938.
 4 1990 апр Retail Trade   13012.
 5 1990 май Retail Trade   13108.
 6 1990 июн Retail Trade   13183.
 7 1990 июл Retail Trade   13170.
 8 1990 авг Retail Trade   13160.
 9 1990 сен Retail Trade   13113.
10 1990 окт Retail Trade   13185.
# … with 347 more rows</code></pre>
</div>
</div>
</section>
<section id="зайнятість-у-розрібній-торгівлі-сша-1" class="slide level2">
<h2>Зайнятість у розрібній торгівлі США</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>dcmp <span class="ot">&lt;-</span> us_retail_employment <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>  <span class="fu">model</span>(<span class="fu">STL</span>(Employed)) <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3"></a>  <span class="fu">components</span>() <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>.model)</span>
<span id="cb37-4"><a href="#cb37-4"></a>dcmp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tsibble: 357 x 6 [1M]
      Month Employed  trend season_year remainder season_adjust
      &lt;mth&gt;    &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;
 1 1990 янв   13256. 13288.      -33.0      0.836        13289.
 2 1990 фев   12966. 13269.     -258.     -44.6          13224.
 3 1990 мар   12938. 13250.     -290.     -22.1          13228.
 4 1990 апр   13012. 13231.     -220.       1.05         13232.
 5 1990 май   13108. 13211.     -114.      11.3          13223.
 6 1990 июн   13183. 13192.      -24.3     15.5          13207.
 7 1990 июл   13170. 13172.      -23.2     21.6          13193.
 8 1990 авг   13160. 13151.       -9.52    17.8          13169.
 9 1990 сен   13113. 13131.      -39.5     22.0          13153.
10 1990 окт   13185. 13110.       61.6     13.2          13124.
# … with 347 more rows</code></pre>
</div>
</div>
</section>
<section id="зайнятість-у-розрібній-торгівлі-сша-2" class="slide level2">
<h2>Зайнятість у розрібній торгівлі США</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>dcmp <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(season_adjust)) <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3"></a>  <span class="fu">forecast</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="#cb39-4"></a>  <span class="fu">autoplot</span>(dcmp) <span class="sc">+</span></span>
<span id="cb39-5"><a href="#cb39-5"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Naive forecasts of seasonally adjusted data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-35-1.png" width="960" class="r-stretch"></section>
<section id="зайнятість-у-розрібній-торгівлі-сша-3" class="slide level2">
<h2>Зайнятість у розрібній торгівлі США</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>us_retail_employment <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="#cb40-2"></a>  <span class="fu">model</span>(<span class="at">stlf =</span> <span class="fu">decomposition_model</span>(</span>
<span id="cb40-3"><a href="#cb40-3"></a>    <span class="fu">STL</span>(Employed <span class="sc">~</span> <span class="fu">trend</span>(<span class="at">window =</span> <span class="dv">7</span>), <span class="at">robust =</span> <span class="cn">TRUE</span>),</span>
<span id="cb40-4"><a href="#cb40-4"></a>    <span class="fu">NAIVE</span>(season_adjust))) <span class="sc">%&gt;%</span></span>
<span id="cb40-5"><a href="#cb40-5"></a>  <span class="fu">forecast</span>() <span class="sc">%&gt;%</span></span>
<span id="cb40-6"><a href="#cb40-6"></a>  <span class="fu">autoplot</span>(us_retail_employment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="06_files/figure-revealjs/unnamed-chunk-36-1.png" width="960" class="r-stretch"></section>
<section id="моделі-декомпозиції" class="slide level2">
<h2>Моделі декомпозиції</h2>
<p><code>decomposition_model()</code> створює модель декомпозиції</p>
<ul>
<li>Необхідно обрати метод для прогнозування <code>season_adjust</code>.</li>
<li>Сезонний наївний метод використовується за замовчуванням для “сезонних” компонентів.</li>
<li>Відхилення прогнозів сезонно скоригованого ряду та сезонності сумуються.</li>
</ul>
</section></section>
<section>
<section id="оцінювання-точності-прогнозів" class="title-slide slide level1 center">
<h1>Оцінювання точності прогнозів</h1>

</section>
<section id="section" class="slide level2">
<h2></h2>

<img data-src="06_files/figure-revealjs/traintest-1.png" width="960" class="r-stretch"><ul>
<li><p>Модель, яка добре відповідає навчальній вибірці, не обов’язково буде добре прогнозувати.</p></li>
<li><p>Ідеальну модель можна отримати, використовуючи модель з достатньою кількістю параметрів.</p></li>
<li><p>Перенавчання (<em>over-fitting</em>) моделі так само погано, як і недонавчання (<em>underfitting</em>).</p>
<ul>
<li><p>Тестовий набір не приймає участі при побудові моделі.</p></li>
<li><p>Точність прогнозу базується лише на тестовому наборі.</p></li>
</ul></li>
</ul>
</section>
<section id="похибка-прогнозів" class="slide level2">
<h2>Похибка прогнозів</h2>
<p>Похибка прогнозів - це різниця між реальними та прогнозними значеннями.</p>
<p><span class="math display">\[e_{T+h} = y_{T+h} - \hat{y}_{T+h|T},\]</span> де <span class="math inline">\(\{y_1,\dots,y_T\}\)</span> - навчальна вибірка</p>
<ul>
<li>На відміну від залишків, помилки прогнозу на тестовому наборі включають багатокрокові прогнози.</li>
<li>Це <em>справжні</em> помилки прогнозу, оскільки тестові дані не використовуються при обчисленні <span class="math inline">\(\hat{y}_{T+h|T}\)</span>.</li>
</ul>
</section>
<section id="вимірювання-точності-прогнозу" class="slide level2">
<h2>Вимірювання точності прогнозу</h2>

<img data-src="06_files/figure-revealjs/unnamed-chunk-37-1.png" width="960" class="r-stretch"></section>
<section id="вимірювання-точності-прогнозу-1" class="slide level2">
<h2>Вимірювання точності прогнозу</h2>
<p><span class="math inline">\(y_{T+h}=(T+h)\)</span>-ому спостереженню, <span class="math inline">\(h=1,\dots,H\)</span></p>
<p><span class="math inline">\(\hat{y}_{T+h|T}=\)</span> це прогноз, на основі <span class="math inline">\(T\)</span> спостережень.</p>
<p><span class="math inline">\(e_{T+h} = y_{T+h} - \hat{y}_{T+h|T}\)</span></p>
<p><span class="math display">\[MAE = \text{mean}(|e_{T+h}|)\]</span> <span class="math display">\[MSE = \text{mean}(e_{T+h}^{2})\]</span> <span class="math display">\[RMSE = \sqrt{\text{mean}(e_{T+h}^{2})}\]</span> <span class="math display">\[MAPE = 100*\text{mean}(\frac{|e_{T+h}|}{|y_{T+h}|})\]</span></p>
<ul>
<li><p>MAE, MSE, RMSE залежать від масштабу.</p></li>
<li><p>MAPE не залежить від масштабу, але є розумним, лише якщо <span class="math inline">\(y_t\gg 0\)</span> для всіх <span class="math inline">\(t\)</span>, а <span class="math inline">\(y\)</span> має природний нуль.</p></li>
</ul>
</section>
<section id="mean-absolute-scaled-error" class="slide level2">
<h2>Mean Absolute Scaled Error</h2>
<p><span class="math display">\[\text{MASE} = \text{mean}(|e_{T+h}|/Q)\]</span> де <span class="math inline">\(Q\)</span> – cійка міра масштабу часового ряду <span class="math inline">\(\{y_t\}\)</span>.</p>
<p>Запропонована Hyndman and Koehler (IJF, 2006).</p>
<p><strong>Для несезонних часових рядів:</strong> <span class="math display">\[Q = (T-1)^{-1}\sum_{t=2}^T |y_t-y_{t-1}|\]</span></p>
</section>
<section id="mean-absolute-scaled-error-1" class="slide level2">
<h2>Mean Absolute Scaled Error</h2>
<p><span class="math display">\[\text{MASE} = \text{mean}(|e_{T+h}|/Q)\]</span> де <span class="math inline">\(Q\)</span> – cійка міра масштабу часового ряду <span class="math inline">\(\{y_t\}\)</span>.</p>
<p>Запропонована Hyndman and Koehler (IJF, 2006).</p>
<p><strong>Для сезонних часових рядів:</strong> <span class="math display">\[Q = (T-m)^{-1}\sum_{t=m+1}^T |y_t-y_{t-m}|\]</span></p>
</section>
<section id="вимірювання-точності-прогнозу-2" class="slide level2">
<h2>Вимірювання точності прогнозу</h2>

<img data-src="06_files/figure-revealjs/unnamed-chunk-38-1.png" width="960" class="r-stretch"></section>
<section id="вимірювання-точності-прогнозу-3" class="slide level2">
<h2>Вимірювання точності прогнозу</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>recent_production <span class="ot">&lt;-</span> aus_production <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="#cb41-2"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Quarter) <span class="sc">&gt;=</span> <span class="dv">1992</span>)</span>
<span id="cb41-3"><a href="#cb41-3"></a>train <span class="ot">&lt;-</span> recent_production <span class="sc">%&gt;%</span></span>
<span id="cb41-4"><a href="#cb41-4"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Quarter) <span class="sc">&lt;=</span> <span class="dv">2007</span>)</span>
<span id="cb41-5"><a href="#cb41-5"></a>beer_fit <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span></span>
<span id="cb41-6"><a href="#cb41-6"></a>  <span class="fu">model</span>(</span>
<span id="cb41-7"><a href="#cb41-7"></a>    <span class="at">Mean =</span> <span class="fu">MEAN</span>(Beer),</span>
<span id="cb41-8"><a href="#cb41-8"></a>    <span class="at">Naive =</span> <span class="fu">NAIVE</span>(Beer),</span>
<span id="cb41-9"><a href="#cb41-9"></a>    <span class="at">Seasonal_naive =</span> <span class="fu">SNAIVE</span>(Beer),</span>
<span id="cb41-10"><a href="#cb41-10"></a>    <span class="at">Drift =</span> <span class="fu">RW</span>(Beer <span class="sc">~</span> <span class="fu">drift</span>())</span>
<span id="cb41-11"><a href="#cb41-11"></a>  )</span>
<span id="cb41-12"><a href="#cb41-12"></a>beer_fc <span class="ot">&lt;-</span> beer_fit <span class="sc">%&gt;%</span></span>
<span id="cb41-13"><a href="#cb41-13"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="вимірювання-точності-прогнозу-4" class="slide level2">
<h2>Вимірювання точності прогнозу</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="fu">accuracy</span>(beer_fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell light-mode">
<div class="cell-output-display">

<table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> .model </th>
   <th style="text-align:left;"> .type </th>
   <th style="text-align:right;"> RMSE </th>
   <th style="text-align:right;"> MAE </th>
   <th style="text-align:right;"> MAPE </th>
   <th style="text-align:right;"> MASE </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Drift </td>
   <td style="text-align:left;"> Training </td>
   <td style="text-align:right;"> 65.31337 </td>
   <td style="text-align:right;"> 54.76795 </td>
   <td style="text-align:right;"> 12.178793 </td>
   <td style="text-align:right;"> 3.829927 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mean </td>
   <td style="text-align:left;"> Training </td>
   <td style="text-align:right;"> 43.62858 </td>
   <td style="text-align:right;"> 35.23438 </td>
   <td style="text-align:right;"> 7.886776 </td>
   <td style="text-align:right;"> 2.463942 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Naive </td>
   <td style="text-align:left;"> Training </td>
   <td style="text-align:right;"> 65.31511 </td>
   <td style="text-align:right;"> 54.73016 </td>
   <td style="text-align:right;"> 12.164154 </td>
   <td style="text-align:right;"> 3.827284 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Seasonal_naive </td>
   <td style="text-align:left;"> Training </td>
   <td style="text-align:right;"> 16.78193 </td>
   <td style="text-align:right;"> 14.30000 </td>
   <td style="text-align:right;"> 3.313685 </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="fu">accuracy</span>(beer_fc, recent_production)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell light-mode">
<div class="cell-output-display">

<table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> .model </th>
   <th style="text-align:left;"> .type </th>
   <th style="text-align:right;"> RMSE </th>
   <th style="text-align:right;"> MAE </th>
   <th style="text-align:right;"> MAPE </th>
   <th style="text-align:right;"> MASE </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Drift </td>
   <td style="text-align:left;"> Test </td>
   <td style="text-align:right;"> 64.90129 </td>
   <td style="text-align:right;"> 58.87619 </td>
   <td style="text-align:right;"> 14.577487 </td>
   <td style="text-align:right;"> 4.1172161 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mean </td>
   <td style="text-align:left;"> Test </td>
   <td style="text-align:right;"> 38.44724 </td>
   <td style="text-align:right;"> 34.82500 </td>
   <td style="text-align:right;"> 8.283390 </td>
   <td style="text-align:right;"> 2.4353147 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Naive </td>
   <td style="text-align:left;"> Test </td>
   <td style="text-align:right;"> 62.69290 </td>
   <td style="text-align:right;"> 57.40000 </td>
   <td style="text-align:right;"> 14.184424 </td>
   <td style="text-align:right;"> 4.0139860 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Seasonal_naive </td>
   <td style="text-align:left;"> Test </td>
   <td style="text-align:right;"> 14.31084 </td>
   <td style="text-align:right;"> 13.40000 </td>
   <td style="text-align:right;"> 3.168503 </td>
   <td style="text-align:right;"> 0.9370629 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section></section>
<section>
<section id="крос-валідація-у-часових-рядах" class="title-slide slide level1 center">
<h1>Крос-валідація у часових рядах</h1>

</section>
<section id="крос-валідація-у-часових-рядах-1" class="slide level2 smaller">
<h2>Крос-валідація у часових рядах</h2>
<div class="cell light-mode">

</div>
<div class="cell light-mode">
<div class="cell-output-display">
<p><img data-src="06_files/figure-revealjs/traintest1-1.png" width="960"></p>
</div>
</div>
<div class="cell light-mode">
<div class="cell-output-display">
<p><img data-src="06_files/figure-revealjs/tscvggplot1-1.png" width="960"></p>
</div>
</div>
</section>
<section id="крос-валідація-у-часових-рядах-2" class="slide level2 smaller">
<h2>Крос-валідація у часових рядах</h2>
<div class="cell light-mode">
<div class="cell-output-display">
<p><img data-src="06_files/figure-revealjs/traintest2-1.png" width="960"></p>
</div>
</div>
<div class="cell light-mode">
<div class="cell-output-display">
<p><img data-src="06_files/figure-revealjs/tscvggplot2-1.png" width="960"></p>
</div>
</div>
</section>
<section id="крос-валідація-у-часових-рядах-3" class="slide level2 smaller">
<h2>Крос-валідація у часових рядах</h2>
<div class="cell light-mode">
<div class="cell-output-display">
<p><img data-src="06_files/figure-revealjs/traintest3-1.png" width="960"></p>
</div>
</div>
<div class="cell light-mode">
<div class="cell-output-display">
<p><img data-src="06_files/figure-revealjs/tscvggplot3-1.png" width="960"></p>
</div>
</div>
</section>
<section id="крос-валідація-у-часових-рядах-4" class="slide level2 smaller">
<h2>Крос-валідація у часових рядах</h2>
<div class="cell light-mode">
<div class="cell-output-display">
<p><img data-src="06_files/figure-revealjs/traintest4-1.png" width="960"></p>
</div>
</div>
<div class="cell light-mode">
<div class="cell-output-display">
<p><img data-src="06_files/figure-revealjs/tscvggplot4-1.png" width="960"></p>
</div>
</div>
<ul>
<li>Точність прогнозу усереднюється по тестовим вибіркам.</li>
</ul>
</section>
<section id="крос-валідація-у-часових-рядах-5" class="slide level2">
<h2>Крос-валідація у часових рядах</h2>
<p>Можна розглянути три основні типи CV у часових рядах:</p>
<ul>
<li>Розтягнення (<em>stretch</em>): на кожному кроці вікно навчальної вибірки розтягується на фіксоване значення.</li>
<li>Ковзання (<em>slide</em>): переміщує вікно фіксованої довжини по даним.</li>
<li>Плитка (<em>tile</em>): переміщує вікно фіксованої довжини без перекриття.</li>
</ul>
<p>Три функції для tsibble:</p>
<ul>
<li><p><code>stretch_tsibble()</code>,</p></li>
<li><p><code>slide_tsibble()</code>,</p></li>
<li><p><code>tile_tsibble()</code>.</p></li>
</ul>
<p>Для CV часових рядів найчастіше використовуються розтягнення</p>
</section>
<section id="крос-валідація-у-часових-рядах-6" class="slide level2">
<h2>Крос-валідація у часових рядах</h2>
<p>Розтягення з мінімальною довжиною 3, зростаючи на 1 кожен крок.</p>
<div class="cell light-mode" data-hash="06_cache/revealjs/google-stretch_f49bb86b056092dd0226091f6f1a2f36">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>fb_stretch <span class="ot">&lt;-</span> fb_stock <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2"></a>  <span class="fu">stretch_tsibble</span>(<span class="at">.init =</span> <span class="dv">3</span>, <span class="at">.step =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3"></a>  <span class="fu">filter</span>(.id <span class="sc">!=</span> <span class="fu">max</span>(.id))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell light-mode">
<div class="cell-output cell-output-stdout">
<pre><code># A tsibble: 790,650 x 4 [1]
# Key:       .id [1,255]
  Date       Close trading_day   .id
  &lt;date&gt;     &lt;dbl&gt;       &lt;int&gt; &lt;int&gt;
1 2014-01-02  54.7           1     1
2 2014-01-03  54.6           2     1
3 2014-01-06  57.2           3     1
4 2014-01-02  54.7           1     2
5 2014-01-03  54.6           2     2
6 2014-01-06  57.2           3     2
7 2014-01-07  57.9           4     2
# … with 790,643 more rows</code></pre>
</div>
</div>
</section>
<section id="крос-валідація-у-часових-рядах-7" class="slide level2">
<h2>Крос-валідація у часових рядах</h2>
<p>Побудова моделі <code>RW w/ drift</code> для кожного вікна:</p>
<div class="cell light-mode" data-hash="06_cache/revealjs/google-fit_cf1068ca20d3061d8c1692c504bab389">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>fit_cv <span class="ot">&lt;-</span> fb_stretch <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>  <span class="fu">model</span>(<span class="fu">RW</span>(Close <span class="sc">~</span> <span class="fu">drift</span>()))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell light-mode">
<div class="cell-output cell-output-stdout">
<pre><code># A mable: 1,255 x 3
# Key:     .id, Symbol [1,255]
    .id Symbol `RW(Close ~ drift())`
  &lt;int&gt; &lt;chr&gt;                &lt;model&gt;
1     1 FB             &lt;RW w/ drift&gt;
2     2 FB             &lt;RW w/ drift&gt;
3     3 FB             &lt;RW w/ drift&gt;
4     4 FB             &lt;RW w/ drift&gt;
# … with 1,251 more rows</code></pre>
</div>
</div>
</section>
<section id="крос-валідація-у-часових-рядах-8" class="slide level2">
<h2>Крос-валідація у часових рядах</h2>
<p>Побудова прогнозів на один крок вперед по всім моделям</p>
<div class="cell light-mode" data-hash="06_cache/revealjs/google-fc_049ab10908fcd510d62b011c95427d90">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>fc_cv <span class="ot">&lt;-</span> fit_cv <span class="sc">%&gt;%</span></span>
<span id="cb48-2"><a href="#cb48-2"></a>  <span class="fu">forecast</span>(<span class="at">h=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell light-mode">
<div class="cell-output cell-output-stdout">
<pre><code># A fable: 1,255 x 5 [1]
# Key:     .id, Symbol [1,255]
    .id Symbol trading_day      Close .mean
  &lt;int&gt; &lt;chr&gt;        &lt;dbl&gt;     &lt;dist&gt; &lt;dbl&gt;
1     1 FB               4 N(58, 5.8)  58.4
2     2 FB               5 N(59, 2.7)  59.0
3     3 FB               6 N(59, 1.9)  59.1
4     4 FB               7 N(58, 2.2)  57.7
# … with 1,251 more rows</code></pre>
</div>
</div>
</section>
<section id="крос-валідація-у-часових-рядах-9" class="slide level2">
<h2>Крос-валідація у часових рядах</h2>
<div class="cell light-mode" data-hash="06_cache/revealjs/google-accuracy_b4315a68c0cb77d6d846400eb22d1238">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="co"># Cross-validated</span></span>
<span id="cb50-2"><a href="#cb50-2"></a>fc_cv <span class="sc">%&gt;%</span> <span class="fu">accuracy</span>(fb_stock)</span>
<span id="cb50-3"><a href="#cb50-3"></a><span class="co"># Training set</span></span>
<span id="cb50-4"><a href="#cb50-4"></a>fb_stock <span class="sc">%&gt;%</span> <span class="fu">model</span>(<span class="fu">RW</span>(Close <span class="sc">~</span> <span class="fu">drift</span>())) <span class="sc">%&gt;%</span> <span class="fu">accuracy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell light-mode">
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:left;"> Type </th>
   <th style="text-align:right;"> RMSE </th>
   <th style="text-align:right;"> MAE </th>
   <th style="text-align:right;"> MAPE </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Cross-validation </td>
   <td style="text-align:right;"> 2.418172 </td>
   <td style="text-align:right;"> 1.468729 </td>
   <td style="text-align:right;"> 1.265941 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Training </td>
   <td style="text-align:right;"> 2.413595 </td>
   <td style="text-align:right;"> 1.464813 </td>
   <td style="text-align:right;"> 1.261279 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Гарний спосіб вибрати найкращу модель прогнозування — це знайти модель з найменшим RMSE, обчисленим за допомогою перехресної перевірки часових рядів.</p>
</section></section>
<section id="дякую-за-увагу" class="title-slide slide level1 unnumbered unlisted center">
<h1>Дякую за увагу!</h1>
<p><br> <br></p>
<p><svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M464 64C490.5 64 512 85.49 512 112C512 127.1 504.9 141.3 492.8 150.4L275.2 313.6C263.8 322.1 248.2 322.1 236.8 313.6L19.2 150.4C7.113 141.3 0 127.1 0 112C0 85.49 21.49 64 48 64H464zM217.6 339.2C240.4 356.3 271.6 356.3 294.4 339.2L512 176V384C512 419.3 483.3 448 448 448H64C28.65 448 0 419.3 0 384V176L217.6 339.2z"></path></svg> ihor.miroshnychenko@kneu.ua</p>
<p><svg aria-hidden="true" role="img" viewbox="0 0 576 512" style="height:1em;width:1.12em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M575.8 255.5C575.8 273.5 560.8 287.6 543.8 287.6H511.8L512.5 447.7C512.5 450.5 512.3 453.1 512 455.8V472C512 494.1 494.1 512 472 512H456C454.9 512 453.8 511.1 452.7 511.9C451.3 511.1 449.9 512 448.5 512H392C369.9 512 352 494.1 352 472V384C352 366.3 337.7 352 320 352H256C238.3 352 224 366.3 224 384V472C224 494.1 206.1 512 184 512H128.1C126.6 512 125.1 511.9 123.6 511.8C122.4 511.9 121.2 512 120 512H104C81.91 512 64 494.1 64 472V360C64 359.1 64.03 358.1 64.09 357.2V287.6H32.05C14.02 287.6 0 273.5 0 255.5C0 246.5 3.004 238.5 10.01 231.5L266.4 8.016C273.4 1.002 281.4 0 288.4 0C295.4 0 303.4 2.004 309.5 7.014L564.8 231.5C572.8 238.5 576.9 246.5 575.8 255.5L575.8 255.5z"></path></svg> <a href="https://aranaur.rbind.io">aranaur.rbind.io</a></p>
<p><svg aria-hidden="true" role="img" viewbox="0 0 496 512" style="height:1em;width:0.97em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> <a href="https://github.com/Aranaur">@aranaur</a></p>
<p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg> <a href="https://www.linkedin.com/in/ihormiroshnychenko/">@ihormiroshnychenko</a></p>
<p><svg aria-hidden="true" role="img" viewbox="0 0 496 512" style="height:1em;width:0.97em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M248 8C111 8 0 119 0 256S111 504 248 504 496 392.1 496 256 384.1 8 248 8zM362.1 176.7c-3.732 39.22-19.88 134.4-28.1 178.3-3.476 18.58-10.32 24.82-16.95 25.42-14.4 1.326-25.34-9.517-39.29-18.66-21.83-14.31-34.16-23.22-55.35-37.18-24.49-16.14-8.612-25 5.342-39.5 3.652-3.793 67.11-61.51 68.33-66.75 .153-.655 .3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283 .746-104.6 69.14-14.85 10.19-26.89 9.934c-8.855-.191-25.89-5.006-38.55-9.123-15.53-5.048-27.88-7.717-26.8-16.29q.84-6.7 18.45-13.7 108.4-47.25 144.6-62.3c68.87-28.65 83.18-33.62 92.51-33.79 2.052-.034 6.639 .474 9.61 2.885a10.45 10.45 0 0 1 3.53 6.716A43.76 43.76 0 0 1 362.1 176.7z"></path></svg> <a href="https://t.me/araprof">Data Mirosh</a></p>

<img src="img/logo.png" class="slide-logo r-stretch"><div class="footer footer-default">
<p><a href="https://t.me/araprof">Data Mirosh</a></p>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="06_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="06_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="06_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="06_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="06_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="06_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="06_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="06_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="06_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="06_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="06_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: true,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>