<!DOCTYPE html>
<html lang="en"><head>
<script src="08_files/libs/clipboard/clipboard.min.js"></script>
<script src="08_files/libs/quarto-html/tabby.min.js"></script>
<script src="08_files/libs/quarto-html/popper.min.js"></script>
<script src="08_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="08_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="08_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="08_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.237">

  <meta name="author" content="Ігор Мірошниченко">
  <meta name="dcterms.date" content="2022-11-23">
  <title>08 - ARIMA</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="08_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="08_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #e1e4e8; background-color: #24292e; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #e1e4e8; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #f97583; } /* Attribute */
    code span.bn { color: #79b8ff; } /* BaseN */
    code span.bu { color: #f97583; } /* BuiltIn */
    code span.cf { color: #f97583; } /* ControlFlow */
    code span.ch { color: #9ecbff; } /* Char */
    code span.cn { color: #79b8ff; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #f97583; } /* DataType */
    code span.dv { color: #79b8ff; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #f97583; font-weight: bold; } /* Extension */
    code span.fl { color: #79b8ff; } /* Float */
    code span.fu { color: #b392f0; } /* Function */
    code span.im { color: #9ecbff; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #f97583; } /* Keyword */
    code span.op { color: #e1e4e8; } /* Operator */
    code span.ot { color: #b392f0; } /* Other */
    code span.pp { color: #f97583; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #79b8ff; } /* SpecialChar */
    code span.ss { color: #9ecbff; } /* SpecialString */
    code span.st { color: #9ecbff; } /* String */
    code span.va { color: #ffab70; } /* Variable */
    code span.vs { color: #9ecbff; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="08_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="08_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="08_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="08_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="08_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="08_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="08_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">08 - ARIMA</h1>
  <p class="subtitle">Прогнозування часових рядів</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Ігор Мірошниченко 
</div>
        <p class="quarto-title-affiliation">
            КНЕУ::ІІТЕ
          </p>
    </div>
</div>

  <p class="date">11/23/22</p>
</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">ЗМІСТ</h2>
<ul>
<li><a href="#/загальна-інформація" id="/toc-загальна-інформація">Загальна інформація</a></li>
<li><a href="#/стаціонарність-і-диференціація" id="/toc-стаціонарність-і-диференціація">Стаціонарність і диференціація</a></li>
<li><a href="#/несезонні-arima-моделі" id="/toc-несезонні-arima-моделі">Несезонні ARIMA моделі</a></li>
<li><a href="#/оцінка-та-вибір-порядку" id="/toc-оцінка-та-вибір-порядку">Оцінка та вибір порядку</a></li>
<li><a href="#/побудова-arima-в-r" id="/toc-побудова-arima-в-r">Побудова ARIMA в R</a></li>
<li><a href="#/сезонні-моделі-arima" id="/toc-сезонні-моделі-arima">Сезонні моделі ARIMA</a></li>
<li><a href="#/arima-vs-ets" id="/toc-arima-vs-ets">ARIMA vs ETS</a></li>
</ul>
</nav>
</section>
<section>
<section id="загальна-інформація" class="title-slide slide level1 center">
<h1>Загальна інформація</h1>

</section>
<section id="arima-моделі" class="slide level2">
<h2>ARIMA моделі</h2>
<ul>
<li><p><strong>AR</strong>: авторегресія (лагові значення як вхідні дані)</p></li>
<li><p><strong>I</strong>: інтегрування (диференціювання для стаціонарності)</p></li>
<li><p><strong>MA</strong>: ковазна середня (лагові помилки як вхідні дані)</p></li>
</ul>
<p>Модель ARIMA рідко можна інтерпретувати з точки зору структур даних, таких як тренд і сезонність. Але вони можуть охопити величезне різноманіття шаблонів часових рядів.</p>
</section></section>
<section>
<section id="стаціонарність-і-диференціація" class="title-slide slide level1 center">
<h1>Стаціонарність і диференціація</h1>

</section>
<section id="стаціонарність" class="slide level2">
<h2>Стаціонарність</h2>
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Визначення</strong></p>
</div>
<div class="callout-content">
<p>Якщо <span class="math inline">\(\{y_t\}\)</span> — стаціонарний часовий ряд, то для всіх <span class="math inline">\(s\)</span> розподіл <span class="math inline">\((y_t,\dots,y_{t+s})\)</span> не залежить від <span class="math inline">\(t\)</span></p>
</div>
</div>
</div>
<p><strong>Стаціонарний ряд</strong> це:</p>
<ul>
<li>приблизно горизонтальний ряд</li>
<li>постійна дисперсія</li>
<li>відсутність передбачуваних патернів у довгостроковій перспективі</li>
</ul>
</section>
<section id="стаціонарність-1" class="slide level2">
<h2>Стаціонарність?</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>gafa_stock <span class="sc">%&gt;%</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>  <span class="fu">filter</span>(Symbol <span class="sc">==</span> <span class="st">"GOOG"</span>, <span class="fu">year</span>(Date) <span class="sc">==</span> <span class="dv">2018</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="fu">autoplot</span>(Close) <span class="sc">+</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Google closing stock price"</span>, <span class="at">x =</span> <span class="st">"Day"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-1-1.png" width="960" class="r-stretch"></section>
<section id="стаціонарність-2" class="slide level2">
<h2>Стаціонарність?</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>gafa_stock <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="fu">filter</span>(Symbol <span class="sc">==</span> <span class="st">"GOOG"</span>, <span class="fu">year</span>(Date) <span class="sc">==</span> <span class="dv">2018</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="fu">autoplot</span>(<span class="fu">difference</span>(Close)) <span class="sc">+</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Google closing stock price"</span>, <span class="at">x =</span> <span class="st">"Day"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-2-1.png" width="960" class="r-stretch"></section>
<section id="стаціонарність-3" class="slide level2">
<h2>Стаціонарність?</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>global_economy <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"Algeria"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="fu">autoplot</span>(Exports) <span class="sc">+</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"% of GDP"</span>, <span class="at">title =</span> <span class="st">"Algerian Exports"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-3-1.png" width="960" class="r-stretch"></section>
<section id="стаціонарність-4" class="slide level2">
<h2>Стаціонарність?</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>aus_production <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">autoplot</span>(Bricks) <span class="sc">+</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Clay brick production in Australia"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-4-1.png" width="960" class="r-stretch"></section>
<section id="стаціонарність-5" class="slide level2">
<h2>Стаціонарність?</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>prices <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">1900</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">autoplot</span>(eggs) <span class="sc">+</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="st">"$US (1993)"</span>, <span class="at">title=</span><span class="st">"Price of a dozen eggs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-5-1.png" width="960" class="r-stretch"></section>
<section id="стаціонарність-6" class="slide level2">
<h2>Стаціонарність?</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>aus_livestock <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="fu">filter</span>(Animal <span class="sc">==</span> <span class="st">"Pigs"</span>, State <span class="sc">==</span> <span class="st">"Victoria"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="fu">autoplot</span>(Count<span class="sc">/</span><span class="fl">1e3</span>) <span class="sc">+</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"thousands"</span>, <span class="at">title =</span> <span class="st">"Total pigs slaughtered in Victoria"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-6-1.png" width="960" class="r-stretch"></section>
<section id="стаціонарність-7" class="slide level2">
<h2>Стаціонарність?</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>aus_livestock <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">filter</span>(Animal <span class="sc">==</span> <span class="st">"Pigs"</span>, State <span class="sc">==</span> <span class="st">"Victoria"</span>, <span class="fu">year</span>(Month) <span class="sc">&gt;=</span> <span class="dv">2010</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="fu">autoplot</span>(Count<span class="sc">/</span><span class="fl">1e3</span>) <span class="sc">+</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"thousands"</span>, <span class="at">title =</span> <span class="st">"Total pigs slaughtered in Victoria"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-7-1.png" width="960" class="r-stretch"></section>
<section id="стаціонарність-8" class="slide level2">
<h2>Стаціонарність?</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>aus_livestock <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="fu">filter</span>(Animal <span class="sc">==</span> <span class="st">"Pigs"</span>, State <span class="sc">==</span> <span class="st">"Victoria"</span>, <span class="fu">year</span>(Month) <span class="sc">&gt;=</span> <span class="dv">2015</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="fu">autoplot</span>(Count<span class="sc">/</span><span class="fl">1e3</span>) <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"thousands"</span>, <span class="at">title =</span> <span class="st">"Total pigs slaughtered in Victoria"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-8-1.png" width="960" class="r-stretch"></section>
<section id="стаціонарність-9" class="slide level2">
<h2>Стаціонарність?</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>pelt <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="fu">autoplot</span>(Lynx) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Number trapped"</span>, <span class="at">title =</span> <span class="st">"Annual Canadian Lynx Trappings"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-9-1.png" width="960" class="r-stretch"></section>
<section id="стаціонарність-10" class="slide level2">
<h2>Стаціонарність</h2>
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Визначення</strong></p>
</div>
<div class="callout-content">
<p>Якщо <span class="math inline">\(\{y_t\}\)</span> — стаціонарний часовий ряд, то для всіх <span class="math inline">\(s\)</span> розподіл <span class="math inline">\((y_t,\dots,y_{t+s})\)</span> не залежить від <span class="math inline">\(t\)</span></p>
</div>
</div>
</div>
<p>Трансформації допомагають <strong>стабілізувати дисперсію</strong>.</p>
<p>Для моделювання ARIMA нам також потрібно <strong>стабілізувати середнє</strong>.</p>
</section>
<section id="нестаціонарність-у-середньому" class="slide level2">
<h2>Нестаціонарність у середньому</h2>
<p><strong>Ідентифікація нестаціонарних рядів</strong></p>
<ul>
<li>графік часу.</li>
<li>ACF стаціонарних даних відносно швидко падає до нуля</li>
<li>ACF нестаціонарних даних зменшується повільно.</li>
<li>Для нестаціонарних даних значення <span class="math inline">\(r_1\)</span> часто є великим і позитивним.</li>
</ul>
</section>
<section id="приклад-google-stock-price" class="slide level2">
<h2>Приклад: Google stock price</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>google_2018 <span class="ot">&lt;-</span> gafa_stock <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="fu">filter</span>(Symbol <span class="sc">==</span> <span class="st">"GOOG"</span>, <span class="fu">year</span>(Date) <span class="sc">==</span> <span class="dv">2018</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="приклад-google-stock-price-1" class="slide level2">
<h2>Приклад: Google stock price</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>google_2018 <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">autoplot</span>(Close) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Closing stock price ($USD)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-11-1.png" width="960" class="r-stretch"></section>
<section id="приклад-google-stock-price-2" class="slide level2">
<h2>Приклад: Google stock price</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>google_2018 <span class="sc">%&gt;%</span> <span class="fu">ACF</span>(Close) <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-12-1.png" width="960" class="r-stretch"></section>
<section id="приклад-google-stock-price-3" class="slide level2">
<h2>Приклад: Google stock price</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>google_2018 <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">autoplot</span>(<span class="fu">difference</span>(Close)) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Change in Google closing stock price ($USD)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-13-1.png" width="960" class="r-stretch"></section>
<section id="приклад-google-stock-price-4" class="slide level2">
<h2>Приклад: Google stock price</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>google_2018 <span class="sc">%&gt;%</span> <span class="fu">ACF</span>(<span class="fu">difference</span>(Close)) <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-14-1.png" width="960" class="r-stretch"></section>
<section id="диференціювання" class="slide level2">
<h2>Диференціювання</h2>
<ul>
<li>Розрізнення допомагає <strong>стабілізувати середнє</strong>.</li>
<li>Ряд різниць — це <em>зміна</em> між кожним спостереженням у вхідному ряді: <span class="math inline">\(y'_t = y_t - y_{t-1}\)</span>.</li>
<li>Ряд різниць матиме лише значення <span class="math inline">\(T-1\)</span>, оскільки неможливо обчислити різницю <span class="math inline">\(y_1'\)</span> для першого спостереження.</li>
</ul>
</section>
<section id="модель-випадкового-блукання" class="slide level2">
<h2>Модель випадкового блукання</h2>
<p>Якщо ряд різниць є білим шумом із нульовим середнім:</p>
<p><span class="math display">\[y_t-y_{t-1}=\varepsilon_t\]</span> <span class="math display">\[y_t=y_{t-1}+\varepsilon_t\]</span></p>
<p>де <span class="math inline">\(\varepsilon_t \sim NID(0,\sigma^2)\)</span>.</p>
<ul>
<li>Дуже широко використовується для нестаціонарних даних.</li>
<li>Це модель <strong>наївного методу</strong>.</li>
<li>Випадкові блукання зазвичай мають:
<ul>
<li>тривалі періоди тенденцій до зростання або зниження</li>
<li>Раптові/непередбачувані зміни напрямку</li>
</ul></li>
<li>Прогноз дорівнює останньому спостереженню
<ul>
<li>майбутні рухи вгору або вниз однаково ймовірні.</li>
</ul></li>
</ul>
</section>
<section id="випадкове-блукання-з-дріфтовою-моделлю" class="slide level2">
<h2>Випадкове блукання з дріфтовою моделлю</h2>
<p>Якщо різницевий ряд є білим шумом із ненульовим середнім:</p>
<p><span class="math display">\[y_t-y_{t-1}=c+\varepsilon_t\]</span> або <span class="math display">\[y_t=c+y_{t-1}+\varepsilon_t\]</span></p>
<p>де <span class="math inline">\(\varepsilon_t \sim NID(0,\sigma^2)\)</span>.</p>
<ul>
<li><span class="math inline">\(c\)</span> — це <em>середня зміна</em> між послідовними спостереженнями.</li>
<li>Якщо <span class="math inline">\(c&gt;0\)</span>, <span class="math inline">\(y_t\)</span> буде тяжіти до підвищення і навпаки.</li>
<li>Це модель <strong>метод дрейфу</strong>.</li>
</ul>
</section>
<section id="різниця-другого-порядку" class="slide level2">
<h2>Різниця другого порядку</h2>
<p>Іноді перших різниць недостатньо для досягнення стаціонарності, в таких випадках може знадобитися різниця другого порядку (різниця різниць): <span class="math display">\[y''_{t}  = y'_{t} - y'_{t - 1} \\
          = (y_t - y_{t-1}) - (y_{t-1}-y_{t-2})\\
          = y_t - 2y_{t-1} +y_{t-2}.\]</span></p>
<ul>
<li><span class="math inline">\(y_t''\)</span> матиме значення <span class="math inline">\(T-2\)</span>.</li>
<li>На практиці майже ніколи не потрібно виходити за межі різниць другого порядку.</li>
</ul>
</section>
<section id="різниця-другого-порядку-1" class="slide level2">
<h2>Різниця другого порядку</h2>
<p>Сезонна різниця – це різниця між спостереженням і відповідним спостереженням за попередній рік. <span class="math display">\[
  y'_t = y_t - y_{t-m}
\]</span> де <span class="math inline">\(m=\)</span> кількість сезонів.</p>
<ul>
<li>Для місячних даних <span class="math inline">\(m=12\)</span>.</li>
<li>Для квартальних даних <span class="math inline">\(m=4\)</span>.</li>
</ul>
</section>
<section id="продаж-антидіабетичних-препаратів" class="slide level2">
<h2>Продаж антидіабетичних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>a10 <span class="ot">&lt;-</span> PBS <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">filter</span>(ATC2 <span class="sc">==</span> <span class="st">"A10"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="fu">summarise</span>(<span class="at">Cost =</span> <span class="fu">sum</span>(Cost)<span class="sc">/</span><span class="fl">1e6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="продаж-антидіабетичних-препаратів-1" class="slide level2">
<h2>Продаж антидіабетичних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>a10 <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(</span>
<span id="cb16-2"><a href="#cb16-2"></a>  Cost</span>
<span id="cb16-3"><a href="#cb16-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-16-1.png" width="960" class="r-stretch"></section>
<section id="продаж-антидіабетичних-препаратів-2" class="slide level2">
<h2>Продаж антидіабетичних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>a10 <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(</span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="fu">log</span>(Cost)</span>
<span id="cb17-3"><a href="#cb17-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-17-1.png" width="960" class="r-stretch"></section>
<section id="продаж-антидіабетичних-препаратів-3" class="slide level2">
<h2>Продаж антидіабетичних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>a10 <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(</span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">log</span>(Cost) <span class="sc">%&gt;%</span> <span class="fu">difference</span>(<span class="dv">12</span>)</span>
<span id="cb18-3"><a href="#cb18-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-18-1.png" width="960" class="r-stretch"></section>
<section id="продаж-кортикостероїдних-препаратів" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>h02 <span class="ot">&lt;-</span> PBS <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">filter</span>(ATC2 <span class="sc">==</span> <span class="st">"H02"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="fu">summarise</span>(<span class="at">Cost =</span> <span class="fu">sum</span>(Cost)<span class="sc">/</span><span class="fl">1e6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="продаж-кортикостероїдних-препаратів-1" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>h02 <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(</span>
<span id="cb20-2"><a href="#cb20-2"></a>  Cost</span>
<span id="cb20-3"><a href="#cb20-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-20-1.png" width="960" class="r-stretch"></section>
<section id="продаж-кортикостероїдних-препаратів-2" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>h02 <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(</span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">log</span>(Cost)</span>
<span id="cb21-3"><a href="#cb21-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-21-1.png" width="960" class="r-stretch"></section>
<section id="продаж-кортикостероїдних-препаратів-3" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>h02 <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(</span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">log</span>(Cost) <span class="sc">%&gt;%</span> <span class="fu">difference</span>(<span class="dv">12</span>)</span>
<span id="cb22-3"><a href="#cb22-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-22-1.png" width="960" class="r-stretch"></section>
<section id="продаж-кортикостероїдних-препаратів-4" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>h02 <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(</span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="fu">log</span>(Cost) <span class="sc">%&gt;%</span> <span class="fu">difference</span>(<span class="dv">12</span>) <span class="sc">%&gt;%</span> <span class="fu">difference</span>(<span class="dv">1</span>)</span>
<span id="cb23-3"><a href="#cb23-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-23-1.png" width="960" class="r-stretch"></section>
<section id="продаж-кортикостероїдних-препаратів-5" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<ul>
<li>Ряд із сезонними різницями ближче до стаціонарного.</li>
<li>Решту нестаціонарності можна усунути подальшою першою різницею.</li>
</ul>
<p>Якщо <span class="math inline">\(y'_t = y_t - y_{t-12}\)</span> позначає ряд із сезонною різницею, тоді ряд з подвійною різницею є</p>
<p><span class="math display">\[y^*_t = y'_t - y'_{t-1} \\
       = (y_t - y_{t-12}) - (y_{t-1} - y_{t-13}) \\
       = y_t - y_{t-1} - y_{t-12} + y_{t-13}\]</span></p>
</section>
<section id="сезонна-різниця" class="slide level2">
<h2>Сезонна різниця</h2>
<p>Коли застосовуються сезонні і перші різниці?</p>
<ul>
<li>немає різниці, що буде зроблено першим — результат буде той самий.</li>
<li>Якщо сезонність сильна, ми рекомендуємо спочатку виконати сезонну різницю, оскільки інколи результуючий ряд буде стаціонарним і не буде потреби в подальшій першій різниці.</li>
</ul>
<p>Важливо, що ряд різниць можна інтерпретувати.</p>
</section>
<section id="інтерпретація-різниць" class="slide level2">
<h2>Інтерпретація різниць</h2>
<ul>
<li>перші різниці – це зміна між <strong>одним спостереженням і наступним</strong>;</li>
<li>сезонні різниці – це зміна <strong>одного року до наступного</strong>.</li>
</ul>
<p>Але, наприклад, різниці із затримкою 3 для річних даних призводить до моделі, яку неможливо розумно інтерпретувати.</p>
</section>
<section id="перевірка-одиничного-кореня" class="slide level2">
<h2>Перевірка одиничного кореня</h2>
<p><strong>Статистичні тести для визначення необхідного порядку різниці.</strong></p>
<ol type="1">
<li>Розширений тест Дікі Фуллера: нульова гіпотеза полягає в тому, що дані є нестаціонарними та несезонними.</li>
<li>Тест Квятковського-Філліпса-Шмідта-Шина (KPSS): нульова гіпотеза полягає в тому, що дані стаціонарні та несезонні.</li>
<li>Інші тести, доступні для сезонних даних.</li>
</ol>
</section>
<section id="kpss-тест" class="slide level2">
<h2>KPSS тест</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>google_2018 <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">features</span>(Close, unitroot_kpss)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  Symbol kpss_stat kpss_pvalue
  &lt;chr&gt;      &lt;dbl&gt;       &lt;dbl&gt;
1 GOOG       0.573      0.0252</code></pre>
</div>
</div>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>google_2018 <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="fu">features</span>(Close, unitroot_ndiffs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  Symbol ndiffs
  &lt;chr&gt;   &lt;int&gt;
1 GOOG        1</code></pre>
</div>
</div>
</section>
<section id="автоматичний-вибір-порядку-різниць" class="slide level2">
<h2>Автоматичний вибір порядку різниць</h2>
<p>STL декомпозиція : <span class="math inline">\(y_t = T_t+S_t+R_t\)</span></p>
<p>Сила сезонності <span class="math inline">\(F_s = \max\big(0, 1-\frac{\text{Var}(R_t)}{\text{Var}(S_t+R_t)}\big)\)</span></p>
<p>Якщо <span class="math inline">\(F_s &gt; 0,64\)</span>, виконайте одну сезонну різницю.</p>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>h02 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">log_sales =</span> <span class="fu">log</span>(Cost)) <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2"></a>   <span class="fu">features</span>(log_sales, <span class="fu">list</span>(unitroot_nsdiffs, feat_stl))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 10
  nsdiffs trend_stren…¹ seaso…² seaso…³ seaso…⁴ spikin…⁵ linea…⁶ curva…⁷ stl_e…⁸
    &lt;int&gt;         &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1       1         0.957   0.955       6       8 3.78e-10    2.92  -0.831  -0.237
# … with 1 more variable: stl_e_acf10 &lt;dbl&gt;, and abbreviated variable names
#   ¹​trend_strength, ²​seasonal_strength_year, ³​seasonal_peak_year,
#   ⁴​seasonal_trough_year, ⁵​spikiness, ⁶​linearity, ⁷​curvature, ⁸​stl_e_acf1</code></pre>
</div>
</div>
</section>
<section id="автоматичний-вибір-порядку-різниць-1" class="slide level2">
<h2>Автоматичний вибір порядку різниць</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>h02 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">log_sales =</span> <span class="fu">log</span>(Cost)) <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="fu">features</span>(log_sales, unitroot_nsdiffs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  nsdiffs
    &lt;int&gt;
1       1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>h02 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">d_log_sales =</span> <span class="fu">difference</span>(<span class="fu">log</span>(Cost), <span class="dv">12</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>  <span class="fu">features</span>(d_log_sales, unitroot_ndiffs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  ndiffs
   &lt;int&gt;
1      1</code></pre>
</div>
</div>
</section></section>
<section>
<section id="несезонні-arima-моделі" class="title-slide slide level1 center">
<h1>Несезонні ARIMA моделі</h1>

</section>
<section id="авторегресійні-моделі" class="slide level2">
<h2>Авторегресійні моделі</h2>
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Авторегресійні (AR) моделі:</strong></p>
</div>
<div class="callout-content">
<p><span class="math display">\[
  y_{t} = c + \phi_{1}y_{t - 1} + \phi_{2}y_{t - 2} + \cdots + \phi_{p}y_{t - p} + \varepsilon_{t},
\]</span> де <span class="math inline">\(\varepsilon_t\)</span> — білий шум. Це множинна регресія з <em>лаговими значеннями</em> <span class="math inline">\(y_t\)</span> в якості предикторів.</p>
</div>
</div>
</div>

<img data-src="08_files/figure-revealjs/arp-1.png" width="960" class="r-stretch"></section>
<section id="ar1-модель" class="slide level2">
<h2>AR(1) модель</h2>
<p><span class="math display">\[y_{t} = 18 -0.8 y_{t - 1} + \varepsilon_{t}\]</span> <span class="math inline">\(\varepsilon_t\sim N(0,1)\)</span>, <span class="math inline">\(T=100\)</span>.</p>

<img data-src="08_files/figure-revealjs/unnamed-chunk-28-1.png" width="960" class="r-stretch"></section>
<section id="ar1-модель-1" class="slide level2">
<h2>AR(1) модель</h2>
<p><span class="math display">\[y_{t} = c + \phi_1 y_{t - 1} + \varepsilon_{t}\]</span> * Коли <span class="math inline">\(\phi_1=0\)</span>, <span class="math inline">\(y_t\)</span> <strong>еквівалентно WN</strong></p>
<ul>
<li><p>Якщо <span class="math inline">\(\phi_1=1\)</span> і <span class="math inline">\(c=0\)</span>, <span class="math inline">\(y_t\)</span> <strong>еквівалентно RW</strong></p></li>
<li><p>Коли <span class="math inline">\(\phi_1=1\)</span> і <span class="math inline">\(c\ne0\)</span>, <span class="math inline">\(y_t\)</span> <strong>еквівалентно RW із дріфтом</strong></p></li>
<li><p>Коли <span class="math inline">\(\phi_1&lt;0\)</span>, <span class="math inline">\(y_t\)</span> має тенденцію <strong>коливатися між позитивними та негативними значеннями</strong>.</p></li>
</ul>
</section>
<section id="ar2-модель" class="slide level2">
<h2>AR(2) модель</h2>
<p><span class="math display">\[y_t = 8 + 1.3y_{t-1} - 0.7 y_{t-2} + \varepsilon_t\]</span> <span class="math inline">\(\varepsilon_t\sim N(0,1)\)</span>, <span class="math inline">\(T=100\)</span>.</p>

<img data-src="08_files/figure-revealjs/unnamed-chunk-29-1.png" width="960" class="r-stretch"></section>
<section id="умови-стаціонарності" class="slide level2">
<h2>Умови стаціонарності</h2>
<p>Зазвичай ми обмежуємо авторегресійні моделі стаціонарними даними, і тоді потрібні деякі обмеження на значення параметрів.</p>
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Загальна умова стаціонарності</strong></p>
</div>
<div class="callout-content">
<p>Комплексні корені <span class="math inline">\(1-\phi_1 z - \phi_2 z^2 - \dots - \phi_pz^p\)</span> лежать поза одиничним колом на комплексній площині.</p>
</div>
</div>
</div>
<ul>
<li>Для <span class="math inline">\(p=1\)</span>: <span class="math inline">\(-1&lt;\phi_1&lt;1\)</span>.</li>
<li>Для <span class="math inline">\(p=2\)</span>: <span class="math inline">\(-1&lt;\phi_2&lt;1\qquad \phi_2+\phi_1 &lt; 1 \qquad \phi_2 -\phi_1 &lt; 1\)</span>.</li>
<li>Для <span class="math inline">\(p\ge3\)</span> виконуються більш складні умови.</li>
<li>Про це подбає програмне забезпечення для оцінки.</li>
</ul>
</section>
<section id="модель-ковзного-середнього-ma" class="slide level2">
<h2>Модель ковзного середнього (MA)</h2>
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Модель ковзного середнього (MA)</strong></p>
</div>
<div class="callout-content">
<p><span class="math display">\[
  y_{t} = c + \varepsilon_t + \theta_{1}\varepsilon_{t - 1} + \theta_{2}\varepsilon_{t - 2} + \cdots + \theta_{q}\varepsilon_{t - q},
\]</span> де <span class="math inline">\(\varepsilon_t\)</span> — білий шум. Це множинна регресія з <strong>минулими помилками</strong> як предикторами.</p>
<p><strong>Не плутайте зі згладжуванням ковзного середнього!</strong></p>
</div>
</div>
</div>

<img data-src="08_files/figure-revealjs/maq-1.png" width="960" class="r-stretch"></section>
<section id="ma1-модель" class="slide level2">
<h2>MA(1) модель</h2>
<p><span class="math display">\[y_t = 20 + \varepsilon_t + 0.8 \varepsilon_{t-1}\]</span> <span class="math inline">\(\varepsilon_t\sim N(0,1)\)</span>, <span class="math inline">\(T=100\)</span>.</p>

<img data-src="08_files/figure-revealjs/unnamed-chunk-30-1.png" width="960" class="r-stretch"></section>
<section id="ma2-модель" class="slide level2">
<h2>MA(2) модель</h2>
<p><span class="math display">\[y_t = \varepsilon_t -\varepsilon_{t-1} + 0.8 \varepsilon_{t-2}\]</span> <span class="math inline">\(\varepsilon_t\sim N(0,1)\)</span>, <span class="math inline">\(T=100\)</span>.</p>

<img data-src="08_files/figure-revealjs/unnamed-chunk-31-1.png" width="960" class="r-stretch"></section>
<section id="mainfty-моделі" class="slide level2">
<h2>MA(<span class="math inline">\(\infty\)</span>) моделі</h2>
<p>Будь-який стаціонарний процес AR(<span class="math inline">\(p\)</span>) можна записати як процес MA(<span class="math inline">\(\infty\)</span>).</p>
<p><strong>Приклад: AR(1)</strong> <span class="math display">\[y_t = \phi_1y_{t-1} + \varepsilon_t\\
= \phi_1(\phi_1y_{t-2} + \varepsilon_{t-1}) + \varepsilon_t\\
= \phi_1^2y_{t-2} + \phi_1 \varepsilon_{t-1} + \varepsilon_t\\
= \phi_1^3y_{t-3} + \phi_1^2\varepsilon_{t-2} + \phi_1 \varepsilon_{t-1} + \varepsilon_t\\\]</span></p>
<p>При <span class="math inline">\(-1&lt;\phi_1&lt;1\)</span>: <span class="math display">\[y_t = \varepsilon_t + \phi_1\varepsilon_{t-1}+ \phi_1^2\varepsilon_{t-2}+ \phi_1^3\varepsilon_{t-3} + \cdots\]</span></p>
</section>
<section id="оберненість" class="slide level2">
<h2>Оберненість</h2>
<ul>
<li>Будь-який процес MA(<span class="math inline">\(q\)</span>) можна записати як процес AR(<span class="math inline">\(\infty\)</span>), якщо ми накладемо деякі обмеження на параметри MA.</li>
<li>Тоді модель МА називається «оберненою».</li>
<li>Обернені моделі мають деякі математичні властивості, які полегшують їх використання на практиці.</li>
<li>Оберненість моделі ARIMA еквівалентна прогнозованості моделі ETS.</li>
</ul>
</section>
<section id="оберненість-1" class="slide level2">
<h2>Оберненість</h2>
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Загальна умова оборотності</strong></p>
</div>
<div class="callout-content">
<p>Комплексні корені <span class="math inline">\(1+\theta_1 z + \theta_2 z^2 + \dots + \theta_qz^q\)</span> лежать поза одиничним колом на комплексній площині.</p>
</div>
</div>
</div>
<ul>
<li>Для <span class="math inline">\(q=1\)</span>: <span class="math inline">\(-1&lt;\theta_1&lt;1\)</span>.</li>
<li>Для <span class="math inline">\(q=2\)</span>: <span class="math inline">\(-1&lt;\theta_2&lt;1\qquad \theta_2+\theta_1 &gt;-1 \qquad \theta_1 -\theta_2 &lt; 1\)</span>.</li>
<li>Для <span class="math inline">\(q\ge3\)</span> виконуються більш складні умови.</li>
<li>Про це подбає програмне забезпечення для оцінки.</li>
</ul>
</section>
<section id="arima-models" class="slide level2">
<h2>ARIMA models</h2>
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Авторегресійні Моделі Ковзного Середнього</strong></p>
</div>
<div class="callout-content">
<p><span class="math display">\[y_{t} = c + \phi_{1}y_{t - 1} + \cdots + \phi_{p}y_{t - p} \\
\text{} + \theta_{1}\varepsilon_{t - 1} + \cdots + \theta_{q}\varepsilon_{t - q} + \varepsilon_{t}\]</span></p>
</div>
</div>
</div>
<ul>
<li>Прогнози включають як <strong>лагові значення <span class="math inline">\(y_t\)</span>, так і лагові помилки.</strong></li>
<li>Умови на коефіцієнти AR забезпечують стаціонарність.</li>
<li>Умови на коефіцієнти MA забезпечують оборотність.</li>
</ul>
<h3 id="авторегресійні-моделі-інтегрованого-ковзного-середнього">Авторегресійні Моделі Інтегрованого Ковзного Середнього</h3>
<ul>
<li>Поєднайте модель ARMA з <strong>інтегруванням</strong>.</li>
</ul>
</section>
<section id="arima-моделі-1" class="slide level2">
<h2>ARIMA моделі</h2>
<p><strong>ARIMA моделі</strong></p>
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>ARIMA(<span class="math inline">\(p, d, q\)</span>) моделі</strong></p>
</div>
<div class="callout-content">
<ul>
<li><strong>AR</strong>: <span class="math inline">\(p =\)</span> порядок авторегресійної частини</li>
<li><strong>I</strong>: <span class="math inline">\(d =\)</span> порядок різниці</li>
<li><strong>MA</strong>: <span class="math inline">\(q =\)</span> порядок ковзної середньої.</li>
</ul>
</div>
</div>
</div>
<ul>
<li>Модель білого шуму: ARIMA(0,0,0)</li>
<li>Випадкове блукання: ARIMA(0,1,0) без константи</li>
<li>Випадкове блукання з дріфтом: ARIMA(0,1,0)</li>
<li>AR(<span class="math inline">\(p\)</span>): ARIMA(<span class="math inline">\(p\)</span>,0,0)</li>
<li>MA(<span class="math inline">\(q\)</span>): ARIMA(0,0,<span class="math inline">\(q\)</span>)</li>
</ul>
</section>
<section id="експорт-єгипету" class="slide level2">
<h2>Експорт Єгипету</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>global_economy <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>  <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">"EGY"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a href="#cb34-3"></a>  <span class="fu">autoplot</span>(Exports) <span class="sc">+</span></span>
<span id="cb34-4"><a href="#cb34-4"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"% of GDP"</span>, <span class="at">title =</span> <span class="st">"Egyptian Exports"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/egyptexportsauto-1.png" width="960" class="r-stretch"></section>
<section id="експорт-єгипету-1" class="slide level2">
<h2>Експорт Єгипету</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>fit <span class="ot">&lt;-</span> global_economy <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">"EGY"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>  <span class="fu">model</span>(<span class="fu">ARIMA</span>(Exports))</span>
<span id="cb35-3"><a href="#cb35-3"></a><span class="fu">report</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: Exports 
Model: ARIMA(2,0,1) w/ mean 

Coefficients:
         ar1      ar2      ma1  constant
      1.6764  -0.8034  -0.6896    2.5623
s.e.  0.1111   0.0928   0.1492    0.1161

sigma^2 estimated as 8.046:  log likelihood=-141.57
AIC=293.13   AICc=294.29   BIC=303.43</code></pre>
</div>
</div>
<h3 id="arima201-model">ARIMA(2,0,1) model:</h3>
<p><span class="math display">\[
  y_t = 2.56
         + 1.68 y_{t-1}
          -0.80 y_{t-2}
          -0.69 \varepsilon_{t-1}
          + \varepsilon_{t},
\]</span> де <span class="math inline">\(\varepsilon_t\)</span> це білий шум зі стандартним відхиленням <span class="math inline">\(2.837 = \sqrt{8.046}\)</span>.</p>
</section>
<section id="експорт-єгипету-2" class="slide level2">
<h2>Експорт Єгипету</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">gg_tsresiduals</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-33-1.png" width="960" class="r-stretch"></section>
<section id="експорт-єгипету-3" class="slide level2">
<h2>Експорт Єгипету</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="fu">augment</span>(fit) <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>  <span class="fu">features</span>(.innov, ljung_box, <span class="at">lag =</span> <span class="dv">10</span>, <span class="at">dof =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  Country          .model         lb_stat lb_pvalue
  &lt;fct&gt;            &lt;chr&gt;            &lt;dbl&gt;     &lt;dbl&gt;
1 Egypt, Arab Rep. ARIMA(Exports)    5.78     0.448</code></pre>
</div>
</div>
</section>
<section id="експорт-єгипету-4" class="slide level2">
<h2>Експорт Єгипету</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>fit <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="#cb40-2"></a>  <span class="fu">autoplot</span>(global_economy) <span class="sc">+</span></span>
<span id="cb40-3"><a href="#cb40-3"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"% of GDP"</span>, <span class="at">title =</span> <span class="st">"Egyptian Exports"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/egyptexportsf-1.png" width="960" class="r-stretch"></section>
<section id="розуміння-моделей-arima" class="slide level2">
<h2>Розуміння моделей ARIMA</h2>
<ul>
<li><p>Якщо <span class="math inline">\(c=0\)</span> і <span class="math inline">\(d=0\)</span>, довгострокові прогнози будуть нульовими.</p></li>
<li><p>Якщо <span class="math inline">\(c=0\)</span> і <span class="math inline">\(d=1\)</span>, довгострокові прогнози переходитимуть до ненульової константи.</p></li>
<li><p>Якщо <span class="math inline">\(c=0\)</span> і <span class="math inline">\(d=2\)</span>, довгострокові прогнози будуть прямувати.</p></li>
<li><p>Якщо <span class="math inline">\(c\ne0\)</span> і <span class="math inline">\(d=0\)</span>, довгострокові прогнози стосуватимуться середнього значення даних.</p></li>
<li><p>Якщо <span class="math inline">\(c\ne0\)</span> і <span class="math inline">\(d=1\)</span>, довгострокові прогнози будуть прямувати.</p></li>
<li><p>Якщо <span class="math inline">\(c\ne0\)</span> і <span class="math inline">\(d=2\)</span>, довгострокові прогнози будуть слідувати квадратичному тренду.</p></li>
</ul>
</section></section>
<section>
<section id="оцінка-та-вибір-порядку" class="title-slide slide level1 center">
<h1>Оцінка та вибір порядку</h1>

</section>
<section id="оцінка-максимальної-правдоподібності-mle" class="slide level2">
<h2>Оцінка максимальної правдоподібності (MLE)</h2>
<p>Визначивши порядок моделі, потрібно оцінити параметри <span class="math inline">\(c\)</span>, <span class="math inline">\(\phi_1,\dots,\phi_p\)</span>, <span class="math inline">\(\theta_1,\dots,\theta_q\)</span>.</p>
<ul>
<li>MLE дуже схожий на оцінку найменших квадратів, отриману шляхом мінімізації <span class="math display">\[
\sum_{t-1}^T e_t^2
\]</span></li>
<li>Функція <code>ARIMA()</code> дозволяє оцінювати CLS або MLE.</li>
<li>Нелінійна оптимізація повинна використовуватися в обох випадках.</li>
<li>Різне програмне забезпечення дає різні оцінки.</li>
</ul>
</section>
<section id="часткові-автокореляції" class="slide level2">
<h2>Часткові автокореляції</h2>
<p><strong>Часткові автокореляції</strong> вимірюють співвідношення між <span class="math inline">\(y_{t}\)</span> і <span class="math inline">\(y_{t - k}\)</span>, коли вплив інших часових лагів — <span class="math inline">\(1, 2, 3, \dots, k - 1\)</span> — видаляються.</p>
<p><span class="math inline">\(\alpha_k\)</span> - це <span class="math inline">\(k\)</span>-ий частковий коефіцієнт автокореляції, який дорівнює оцінці <span class="math inline">\(\phi_k\)</span> у регресії:</p>
<p><span class="math display">\[y_t = c + \phi_1 y_{t-1} + \phi_2 y_{t-2} + \dots + \phi_k y_{t-k} +\varepsilon_t\]</span></p>
<ul>
<li>Різна кількість членів на RHS дає <span class="math inline">\(\alpha_k\)</span> для різних значень <span class="math inline">\(k\)</span>.</li>
<li><span class="math inline">\(\alpha_1=\rho_1\)</span></li>
<li>ті самі критичні значення <span class="math inline">\(\pm 1,96/\sqrt{T}\)</span>, що й для ACF.</li>
<li>Останній значущий <span class="math inline">\(\alpha_k\)</span> вказує на порядок моделі AR.</li>
</ul>
</section>
<section id="експорт-єгипету-5" class="slide level2">
<h2>Експорт Єгипету</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>egypt <span class="ot">&lt;-</span> global_economy <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">"EGY"</span>)</span>
<span id="cb41-2"><a href="#cb41-2"></a>egypt <span class="sc">%&gt;%</span> <span class="fu">ACF</span>(Exports) <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>()</span>
<span id="cb41-3"><a href="#cb41-3"></a>egypt <span class="sc">%&gt;%</span> <span class="fu">PACF</span>(Exports) <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="08_files/figure-revealjs/unnamed-chunk-36-1.png" width="960" class="r-stretch"></section>
<section id="експорт-єгипету-6" class="slide level2">
<h2>Експорт Єгипету</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>global_economy <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">"EGY"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2"></a>  <span class="fu">gg_tsdisplay</span>(Exports, <span class="at">plot_type=</span><span class="st">'partial'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-37-1.png" width="960" class="r-stretch"></section>
<section id="інтерпретація-acf-і-pacf" class="slide level2">
<h2>Інтерпретація ACF і PACF</h2>
<p><strong>AR(1)</strong> <span class="math inline">\(\rho_k = \phi_1^k\)</span> для <span class="math inline">\(k=1,2,\dots\)</span></p>
<p><span class="math inline">\(\alpha_1 = \phi_1\)</span> <span class="math inline">\(\alpha_k = 0\)</span> для <span class="math inline">\(k=2,3,\dots\)</span></p>
<p>Отже, ми маємо модель AR(1), коли</p>
<ul>
<li>автокореляції експоненціально спадають</li>
<li>є одна значуща часткова автокореляція.</li>
</ul>
</section>
<section id="інтерпретація-acf-і-pacf-1" class="slide level2">
<h2>Інтерпретація ACF і PACF</h2>
<p><strong>AR(<span class="math inline">\(p\)</span>)</strong></p>
<ul>
<li>ACF згасає експоненціально або згасає синусоїдально</li>
<li>PACF має всі нульові значення після <span class="math inline">\(p\)</span>-го лагу</li>
</ul>
<p>Отже, у нас є модель AR(<span class="math inline">\(p\)</span>).</p>
<ul>
<li>ACF є експоненціально спадаючою або синусоїдальною</li>
<li>існує значний сплеск на відставанні <span class="math inline">\(p\)</span> в PACF, але не перевищує <span class="math inline">\(p\)</span></li>
</ul>
</section>
<section id="інтерпретація-acf-і-pacf-2" class="slide level2">
<h2>Інтерпретація ACF і PACF</h2>
<p><strong>MA(1)</strong></p>
<p><span class="math inline">\(\rho_1 = \theta_1/(1 + \theta_1^2)\)</span> <span class="math inline">\(\rho_k = 0\)</span> для <span class="math inline">\(k=2,3,\dots\)</span></p>
<p><span class="math inline">\(\alpha_k = -(-\theta_1)^k/(1 + \theta_1^2 + \dots + \theta_1^{2k})\)</span></p>
<p>Отже, ми маємо модель MA(1), коли</p>
<ul>
<li>PACF експоненціально спадає і</li>
<li>є один значний сплеск ACF</li>
</ul>
</section>
<section id="інтерпретація-acf-і-pacf-3" class="slide level2">
<h2>Інтерпретація ACF і PACF</h2>
<p><strong>MA(<span class="math inline">\(q\)</span>)</strong></p>
<ul>
<li>PACF згасає за експоненціальною чи затухаючою синусоїдальною формою</li>
<li>ACF має всі нульові сплески після <span class="math inline">\(q\)</span>-го сплеску</li>
</ul>
<p>Отже, ми маємо модель MA(<span class="math inline">\(q\)</span>), коли</p>
<ul>
<li>PACF є експоненціально спадаючим або синусоїдальним</li>
<li>існує значний сплеск на лаги <span class="math inline">\(q\)</span> у ACF, але не перевищує <span class="math inline">\(q\)</span></li>
</ul>
</section>
<section id="інформаційні-критерії" class="slide level2">
<h2>Інформаційні критерії</h2>
<p><strong>Akaike’s Information Criterion (AIC):</strong></p>
<p><span class="math display">\[\text{AIC} = -2 \log(L) + 2(p+q+k+1),\]</span> де <span class="math inline">\(L\)</span> — це ймовірність даних, <span class="math inline">\(k=1\)</span>, якщо <span class="math inline">\(c\ne0\)</span>, і <span class="math inline">\(k=0\)</span>, якщо <span class="math inline">\(c=0\)</span>.</p>
<p><strong>Corrected AIC:</strong> <span class="math display">\[\text{AICc} = \text{AIC} + \displaystyle\frac{2(p+q+k+1)(p+q+k+2)}{T-p-q-k-2}.\]</span></p>
<p><strong>Bayesian Information Criterion:</strong> <span class="math display">\[\text{BIC} = \text{AIC} + [\log(T)-2](p+q+k+1).\]</span> Кращі моделі обирається шляхом мінімізації AIC, AICc або BIC.</p>
</section></section>
<section>
<section id="побудова-arima-в-r" class="title-slide slide level1 center">
<h1>Побудова ARIMA в R</h1>

</section>
<section id="як-працює-arima" class="slide level2">
<h2>Як працює ARIMA()?</h2>
<p>Несезонний процес ARIMA</p>
<p>Необхідно вибрати відповідні замовлення: <span class="math inline">\(p, q, d\)</span></p>
<p>Алгоритм Хайндмана та Хандакара (JSS, 2008):</p>
<ul>
<li>Виберіть <span class="math inline">\(d=0\)</span> і<span class="math inline">\(D\)</span> через тест KPSS і вимірювання сезонної сили.</li>
<li>Виберіть <span class="math inline">\(p,q\)</span>, мінімізувавши AICc.</li>
<li>Використовуйте покроковий пошук для проходження простору моделі.</li>
</ul>
</section>
<section id="як-працює-arima-1" class="slide level2">
<h2>Як працює ARIMA()?</h2>
<p><strong>Крок 1:</strong> Виберіть поточну модель (з найменшим AICc) із: ARIMA<span class="math inline">\((2,d,2)\)</span>, ARIMA<span class="math inline">\((0,d,0)\)</span>, ARIMA<span class="math inline">\((1,d,0)\)</span>, ARIMA<span class="math inline">\((0,d,1)\)</span></p>
<p><strong>Крок 2:</strong> Розгляньте варіанти поточної моделі:</p>
<ul>
<li>змінити один із <span class="math inline">\(p,q,\)</span> від поточної моделі на <span class="math inline">\(\pm1\)</span>;</li>
<li><span class="math inline">\(p,q\)</span> обидва відрізняються від поточної моделі на <span class="math inline">\(\pm1\)</span>;</li>
<li>Включити/виключити <span class="math inline">\(c\)</span> з поточної моделі.</li>
</ul>
<p>Модель з найнижчим AICc стає поточною моделлю.</p>
<p>Повторюйте крок 2, доки не буде знайдено нижчий AICc.</p>
</section>
<section id="як-працює-arima-2" class="slide level2">
<h2>Як працює ARIMA()?</h2>

<img data-src="08_files/figure-revealjs/ARMAgridsearch-1.png" style="width:60.0%" class="r-stretch"></section>
<section id="як-працює-arima-3" class="slide level2">
<h2>Як працює ARIMA()?</h2>

<img data-src="08_files/figure-revealjs/ARMAgridsearch2-1.png" style="width:60.0%" class="r-stretch"></section>
<section id="як-працює-arima-4" class="slide level2">
<h2>Як працює ARIMA()?</h2>

<img data-src="08_files/figure-revealjs/ARMAgridsearch3-1.png" style="width:60.0%" class="r-stretch"></section>
<section id="як-працює-arima-5" class="slide level2">
<h2>Як працює ARIMA()?</h2>

<img data-src="08_files/figure-revealjs/ARMAgridsearch4-1.png" style="width:60.0%" class="r-stretch"></section>
<section id="експорт-египту" class="slide level2">
<h2>Експорт Египту</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>global_economy <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">"EGY"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a href="#cb43-2"></a>  <span class="fu">gg_tsdisplay</span>(Exports, <span class="at">plot_type=</span><span class="st">'partial'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-38-1.png" width="960" class="r-stretch"></section>
<section id="експорт-египту-1" class="slide level2">
<h2>Експорт Египту</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>fit1 <span class="ot">&lt;-</span> global_economy <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2"></a>  <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">"EGY"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3"></a>  <span class="fu">model</span>(<span class="fu">ARIMA</span>(Exports <span class="sc">~</span> <span class="fu">pdq</span>(<span class="dv">4</span>,<span class="dv">0</span>,<span class="dv">0</span>)))</span>
<span id="cb44-4"><a href="#cb44-4"></a><span class="fu">report</span>(fit1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: Exports 
Model: ARIMA(4,0,0) w/ mean 

Coefficients:
         ar1      ar2     ar3      ar4  constant
      0.9861  -0.1715  0.1807  -0.3283    6.6922
s.e.  0.1247   0.1865  0.1865   0.1273    0.3562

sigma^2 estimated as 7.885:  log likelihood=-140.53
AIC=293.05   AICc=294.7   BIC=305.41</code></pre>
</div>
</div>
</section>
<section id="експорт-египту-2" class="slide level2">
<h2>Експорт Египту</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>fit2 <span class="ot">&lt;-</span> global_economy <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>  <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">"EGY"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb46-3"><a href="#cb46-3"></a>  <span class="fu">model</span>(<span class="fu">ARIMA</span>(Exports))</span>
<span id="cb46-4"><a href="#cb46-4"></a><span class="fu">report</span>(fit2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: Exports 
Model: ARIMA(2,0,1) w/ mean 

Coefficients:
         ar1      ar2      ma1  constant
      1.6764  -0.8034  -0.6896    2.5623
s.e.  0.1111   0.0928   0.1492    0.1161

sigma^2 estimated as 8.046:  log likelihood=-141.57
AIC=293.13   AICc=294.29   BIC=303.43</code></pre>
</div>
</div>
</section>
<section id="експорт-цар" class="slide level2">
<h2>Експорт ЦАР</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>global_economy <span class="sc">%&gt;%</span></span>
<span id="cb48-2"><a href="#cb48-2"></a>  <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">"CAF"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-3"><a href="#cb48-3"></a>  <span class="fu">autoplot</span>(Exports) <span class="sc">+</span></span>
<span id="cb48-4"><a href="#cb48-4"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Central African Republic exports"</span>, <span class="at">y=</span><span class="st">"% of GDP"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-41-1.png" width="960" class="r-stretch"></section>
<section id="експорт-цар-1" class="slide level2">
<h2>Експорт ЦАР</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a>global_economy <span class="sc">%&gt;%</span></span>
<span id="cb49-2"><a href="#cb49-2"></a>  <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">"CAF"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb49-3"><a href="#cb49-3"></a>  <span class="fu">gg_tsdisplay</span>(<span class="fu">difference</span>(Exports), <span class="at">plot_type=</span><span class="st">'partial'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/caf2-1.png" width="960" class="r-stretch"></section>
<section id="експорт-цар-2" class="slide level2">
<h2>Експорт ЦАР</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>caf_fit <span class="ot">&lt;-</span> global_economy <span class="sc">%&gt;%</span></span>
<span id="cb50-2"><a href="#cb50-2"></a>  <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">"CAF"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb50-3"><a href="#cb50-3"></a>  <span class="fu">model</span>(<span class="at">arima210 =</span> <span class="fu">ARIMA</span>(Exports <span class="sc">~</span> <span class="fu">pdq</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>)),</span>
<span id="cb50-4"><a href="#cb50-4"></a>        <span class="at">arima013 =</span> <span class="fu">ARIMA</span>(Exports <span class="sc">~</span> <span class="fu">pdq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>)),</span>
<span id="cb50-5"><a href="#cb50-5"></a>        <span class="at">stepwise =</span> <span class="fu">ARIMA</span>(Exports),</span>
<span id="cb50-6"><a href="#cb50-6"></a>        <span class="at">search =</span> <span class="fu">ARIMA</span>(Exports, <span class="at">stepwise=</span><span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="експорт-цар-3" class="slide level2">
<h2>Експорт ЦАР</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a>caf_fit <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="sc">!</span>Country, <span class="at">names_to =</span> <span class="st">"Model name"</span>,</span>
<span id="cb51-2"><a href="#cb51-2"></a>                         <span class="at">values_to =</span> <span class="st">"Orders"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A mable: 4 x 3
# Key:     Country, Model name [4]
  Country                  `Model name`         Orders
  &lt;fct&gt;                    &lt;chr&gt;               &lt;model&gt;
1 Central African Republic arima210     &lt;ARIMA(2,1,0)&gt;
2 Central African Republic arima013     &lt;ARIMA(0,1,3)&gt;
3 Central African Republic stepwise     &lt;ARIMA(2,1,2)&gt;
4 Central African Republic search       &lt;ARIMA(3,1,0)&gt;</code></pre>
</div>
</div>
</section>
<section id="експорт-цар-4" class="slide level2">
<h2>Експорт ЦАР</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="fu">glance</span>(caf_fit) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(AICc) <span class="sc">%&gt;%</span> <span class="fu">select</span>(.model<span class="sc">:</span>BIC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 6
  .model   sigma2 log_lik   AIC  AICc   BIC
  &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 search     6.52   -133.  274.  275.  282.
2 arima210   6.71   -134.  275.  275.  281.
3 arima013   6.54   -133.  274.  275.  282.
4 stepwise   6.42   -132.  274.  275.  284.</code></pre>
</div>
</div>
</section>
<section id="експорт-цар-5" class="slide level2">
<h2>Експорт ЦАР</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a>caf_fit <span class="sc">%&gt;%</span> <span class="fu">select</span>(search) <span class="sc">%&gt;%</span> <span class="fu">gg_tsresiduals</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/cafres-1.png" width="960" class="r-stretch"></section>
<section id="експорт-цар-6" class="slide level2">
<h2>Експорт ЦАР</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a><span class="fu">augment</span>(caf_fit) <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="#cb56-2"></a>  <span class="fu">filter</span>(.model<span class="sc">==</span><span class="st">'search'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb56-3"><a href="#cb56-3"></a>  <span class="fu">features</span>(.innov, ljung_box, <span class="at">lag =</span> <span class="dv">10</span>, <span class="at">dof =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  Country                  .model lb_stat lb_pvalue
  &lt;fct&gt;                    &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 Central African Republic search    5.75     0.569</code></pre>
</div>
</div>
</section>
<section id="експорт-цар-7" class="slide level2">
<h2>Експорт ЦАР</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a>caf_fit <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="#cb58-2"></a>  <span class="fu">forecast</span>(<span class="at">h=</span><span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-3"><a href="#cb58-3"></a>  <span class="fu">filter</span>(.model<span class="sc">==</span><span class="st">'search'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a href="#cb58-4"></a>  <span class="fu">autoplot</span>(global_economy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/caffc-1.png" width="960" class="r-stretch"></section>
<section id="процедура-моделювання-за-допомогою-arima" class="slide level2">
<h2>Процедура моделювання за допомогою <code>ARIMA()</code></h2>
<ol type="1">
<li>Побудуйте графік даних. Визначте будь-які незвичайні спостереження.</li>
<li>Якщо необхідно, трансформуйте дані (використовуючи перетворення Бокса-Кокса), щоб стабілізувати дисперсію.</li>
<li>Якщо дані нестаціонарні: візьміть перші різниці даних, поки дані не буде досягнуто стаціонарності.</li>
<li>Вивчіть ACF/PACF: чи підходить модель AR(<span class="math inline">\(p\)</span>) чи MA(<span class="math inline">\(q\)</span>)?</li>
<li>Спробуйте обрану модель і використовуйте AICc, щоб знайти кращу модель.</li>
<li>Перевірте залишки з вибраної вами моделі, побудувавши графік ACF залишків і виконавши тест на портманто для залишків. Якщо вони не схожі на білий шум, спробуйте модифіковану модель.</li>
<li>Коли залишки виглядають як білий шум, розрахуйте прогнози.</li>
</ol>
</section>
<section id="процедура-автоматичного-моделювання-за-допомогою-arima" class="slide level2">
<h2>Процедура автоматичного моделювання за допомогою <code>ARIMA()</code></h2>
<ol type="1">
<li>Побудуйте графік даних. Визначте будь-які незвичайні спостереження.</li>
<li>Якщо необхідно, трансформуйте дані (використовуючи перетворення Бокса-Кокса), щоб стабілізувати дисперсію.</li>
<li>Використовуйте <code>ARIMA</code> для автоматичного вибору моделі.</li>
<li>Перевірте залишки з вибраної вами моделі, побудувавши графік АКФ залишків і виконавши тест на портманто для залишків. Якщо вони не схожі на білий шум, спробуйте модифіковану модель.</li>
<li>Коли залишки виглядають як білий шум, розрахуйте прогнози.</li>
</ol>
</section>
<section id="процедура-моделювання" class="slide level2">
<h2>Процедура моделювання</h2>

<img data-src="https://otexts.com/fpp3/figs/arimaflowchart.png" class="r-stretch"></section></section>
<section>
<section id="сезонні-моделі-arima" class="title-slide slide level1 center">
<h1>Сезонні моделі ARIMA</h1>

</section>
<section id="сезонні-моделі-arima-1" class="slide level2">
<h2>Сезонні моделі ARIMA</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: right;">ARIMA</th>
<th style="text-align: center;"><span class="math inline">\(~\underbrace{(p, d, q)}\)</span></th>
<th style="text-align: center;"><span class="math inline">\(\underbrace{(P, D, Q)_{m}}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: center;"><span class="math inline">\({\uparrow}\)</span></td>
<td style="text-align: center;"><span class="math inline">\({\uparrow}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: center;">Несазонна частина</td>
<td style="text-align: center;">Сезонна частина</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: center;">моделі</td>
<td style="text-align: center;">моделі</td>
</tr>
</tbody>
</table>
<p>де <span class="math inline">\(m =\)</span> кількість спостережень на рік.</p>
</section>
<section id="сезонні-моделі-arima-2" class="slide level2">
<h2>Сезонні моделі ARIMA</h2>
<p>Наприклад, модель ARIMA<span class="math inline">\((1, 1, 1)(1, 1, 1)_{4}\)</span> (без константи)</p>
<p><span class="math display">\[y_{t} = (1 + \phi_{1})y_{t - 1} - \phi_1y_{t-2} + (1 + \Phi_{1})y_{t - 4}\\
\text{}
- (1 + \phi_{1} + \Phi_{1} + \phi_{1}\Phi_{1})y_{t - 5}
+ (\phi_{1} + \phi_{1} \Phi_{1}) y_{t - 6} \\
\text{} - \Phi_{1} y_{t - 8} + (\Phi_{1} + \phi_{1} \Phi_{1}) y_{t - 9}
  - \phi_{1} \Phi_{1} y_{t - 10}\\
  \text{}
  + \varepsilon_{t} + \theta_{1}\varepsilon_{t - 1} + \Theta_{1}\varepsilon_{t - 4} + \theta_{1}\Theta_{1}\varepsilon_{t - 5}.\]</span></p>
</section>
<section id="поширені-моделі-arima" class="slide level2">
<h2>Поширені моделі ARIMA</h2>
<p>Бюро перепису населення США найчастіше використовує такі моделі:</p>
<ul>
<li>ARIMA(0,1,1)(0,1,1)<span class="math inline">\(_m\)</span> з перетворенням логарифму</li>
<li>ARIMA(0,1,2)(0,1,1)<span class="math inline">\(_m\)</span> з перетворенням логарифму</li>
<li>ARIMA(2,1,0)(0,1,1)<span class="math inline">\(_m\)</span> з перетворенням логарифму</li>
<li>ARIMA(0,2,2)(0,1,1)<span class="math inline">\(_m\)</span> з перетворенням логарифму</li>
<li>ARIMA(2,1,2)(0,1,1)<span class="math inline">\(_m\)</span> без перетворення</li>
</ul>
</section>
<section id="сезонні-моделі-arima-3" class="slide level2">
<h2>Сезонні моделі ARIMA</h2>
<p>Сезонну частину моделі AR або MA можна буде побачити в сезонних лагах PACF і ACF.</p>
<p><strong>ARIMA(0,0,0)(0,0,1)<span class="math inline">\(_{12}\)</span> покаже:</strong></p>
<ul>
<li><p>стрибок на відставанні 12 у ACF, але жодних інших значних стрибків.</p></li>
<li><p>PACF демонструватиме експоненціальне загасання сезонних лагів; тобто на лагах 12, 24, 36…</p></li>
</ul>
<p><strong>ARIMA(0,0,0)(1,0,0)<span class="math inline">\(_{12}\)</span> покаже:</strong></p>
<ul>
<li><p>експоненціальне спадання сезонних лагів АКФ</p></li>
<li><p>один значний сплеск на відставанні 12 у PACF.</p></li>
</ul>
</section>
<section id="зайнятість-у-сфері-дозвілля-в-сша" class="slide level2">
<h2>Зайнятість у сфері дозвілля в США</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>leisure <span class="ot">&lt;-</span> us_employment <span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a href="#cb59-2"></a>  <span class="fu">filter</span>(Title <span class="sc">==</span> <span class="st">"Leisure and Hospitality"</span>, <span class="fu">year</span>(Month) <span class="sc">&gt;</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="#cb59-3"></a>  <span class="fu">mutate</span>(<span class="at">Employed =</span> Employed<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb59-4"><a href="#cb59-4"></a>  <span class="fu">select</span>(Month, Employed)</span>
<span id="cb59-5"><a href="#cb59-5"></a><span class="fu">autoplot</span>(leisure, Employed) <span class="sc">+</span></span>
<span id="cb59-6"><a href="#cb59-6"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"US employment: leisure &amp; hospitality"</span>, <span class="at">y=</span><span class="st">"People (millions)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-42-1.png" width="960" class="r-stretch"></section>
<section id="зайнятість-у-сфері-дозвілля-в-сша-1" class="slide level2">
<h2>Зайнятість у сфері дозвілля в США</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a>leisure <span class="sc">%&gt;%</span></span>
<span id="cb60-2"><a href="#cb60-2"></a>  <span class="fu">gg_tsdisplay</span>(<span class="fu">difference</span>(Employed, <span class="dv">12</span>), <span class="at">plot_type=</span><span class="st">'partial'</span>, <span class="at">lag=</span><span class="dv">36</span>) <span class="sc">+</span></span>
<span id="cb60-3"><a href="#cb60-3"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Seasonally differenced"</span>, <span class="at">y=</span><span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-43-1.png" width="960" class="r-stretch"></section>
<section id="зайнятість-у-сфері-дозвілля-в-сша-2" class="slide level2">
<h2>Зайнятість у сфері дозвілля в США</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a>leisure <span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a href="#cb61-2"></a>  <span class="fu">gg_tsdisplay</span>(<span class="fu">difference</span>(Employed, <span class="dv">12</span>) <span class="sc">%&gt;%</span> <span class="fu">difference</span>(),</span>
<span id="cb61-3"><a href="#cb61-3"></a>    <span class="at">plot_type=</span><span class="st">'partial'</span>, <span class="at">lag=</span><span class="dv">36</span>) <span class="sc">+</span></span>
<span id="cb61-4"><a href="#cb61-4"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Double differenced"</span>, <span class="at">y=</span><span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-44-1.png" width="960" class="r-stretch"></section>
<section id="зайнятість-у-сфері-дозвілля-в-сша-3" class="slide level2">
<h2>Зайнятість у сфері дозвілля в США</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a>fit <span class="ot">&lt;-</span> leisure <span class="sc">%&gt;%</span></span>
<span id="cb62-2"><a href="#cb62-2"></a>  <span class="fu">model</span>(</span>
<span id="cb62-3"><a href="#cb62-3"></a>    <span class="at">arima012011 =</span> <span class="fu">ARIMA</span>(Employed <span class="sc">~</span> <span class="fu">pdq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>)),</span>
<span id="cb62-4"><a href="#cb62-4"></a>    <span class="at">arima210011 =</span> <span class="fu">ARIMA</span>(Employed <span class="sc">~</span> <span class="fu">pdq</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>)),</span>
<span id="cb62-5"><a href="#cb62-5"></a>    <span class="at">auto =</span> <span class="fu">ARIMA</span>(Employed, <span class="at">stepwise =</span> <span class="cn">FALSE</span>, <span class="at">approx =</span> <span class="cn">FALSE</span>)</span>
<span id="cb62-6"><a href="#cb62-6"></a>  )</span>
<span id="cb62-7"><a href="#cb62-7"></a>fit <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">"Model name"</span>,</span>
<span id="cb62-8"><a href="#cb62-8"></a>                     <span class="at">values_to =</span> <span class="st">"Orders"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A mable: 3 x 2
# Key:     Model name [3]
  `Model name`                    Orders
  &lt;chr&gt;                          &lt;model&gt;
1 arima012011  &lt;ARIMA(0,1,2)(0,1,1)[12]&gt;
2 arima210011  &lt;ARIMA(2,1,0)(0,1,1)[12]&gt;
3 auto         &lt;ARIMA(2,1,0)(1,1,1)[12]&gt;</code></pre>
</div>
</div>
</section>
<section id="зайнятість-у-сфері-дозвілля-в-сша-4" class="slide level2">
<h2>Зайнятість у сфері дозвілля в США</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a><span class="fu">glance</span>(fit) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(AICc) <span class="sc">%&gt;%</span> <span class="fu">select</span>(.model<span class="sc">:</span>BIC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
  .model       sigma2 log_lik   AIC  AICc   BIC
  &lt;chr&gt;         &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 auto        0.00142    395. -780. -780. -763.
2 arima210011 0.00145    392. -776. -776. -763.
3 arima012011 0.00146    391. -775. -775. -761.</code></pre>
</div>
</div>
</section>
<section id="зайнятість-у-сфері-дозвілля-в-сша-5" class="slide level2">
<h2>Зайнятість у сфері дозвілля в США</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a>fit <span class="sc">%&gt;%</span> <span class="fu">select</span>(auto) <span class="sc">%&gt;%</span> <span class="fu">gg_tsresiduals</span>(<span class="at">lag=</span><span class="dv">36</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-47-1.png" width="960" class="r-stretch"></section>
<section id="зайнятість-у-сфері-дозвілля-в-сша-6" class="slide level2">
<h2>Зайнятість у сфері дозвілля в США</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a><span class="fu">augment</span>(fit) <span class="sc">%&gt;%</span> <span class="fu">features</span>(.innov, ljung_box, <span class="at">lag=</span><span class="dv">24</span>, <span class="at">dof=</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  .model      lb_stat lb_pvalue
  &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;
1 arima012011    22.4     0.320
2 arima210011    18.9     0.527
3 auto           16.6     0.680</code></pre>
</div>
</div>
</section>
<section id="зайнятість-у-сфері-дозвілля-в-сша-7" class="slide level2">
<h2>Зайнятість у сфері дозвілля в США</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a><span class="fu">forecast</span>(fit, <span class="at">h=</span><span class="dv">36</span>) <span class="sc">%&gt;%</span></span>
<span id="cb69-2"><a href="#cb69-2"></a>  <span class="fu">filter</span>(.model<span class="sc">==</span><span class="st">'auto'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb69-3"><a href="#cb69-3"></a>  <span class="fu">autoplot</span>(leisure) <span class="sc">+</span></span>
<span id="cb69-4"><a href="#cb69-4"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"US employment: leisure and hospitality"</span>, <span class="at">y=</span><span class="st">"Number of people (millions)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-49-1.png" width="960" class="r-stretch"></section>
<section id="продаж-кортикостероїдних-препаратів-6" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a>h02 <span class="ot">&lt;-</span> PBS <span class="sc">%&gt;%</span></span>
<span id="cb70-2"><a href="#cb70-2"></a>  <span class="fu">filter</span>(ATC2 <span class="sc">==</span> <span class="st">"H02"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb70-3"><a href="#cb70-3"></a>  <span class="fu">summarise</span>(<span class="at">Cost =</span> <span class="fu">sum</span>(Cost)<span class="sc">/</span><span class="fl">1e6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="продаж-кортикостероїдних-препаратів-7" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a>h02 <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(</span>
<span id="cb71-2"><a href="#cb71-2"></a>  Cost</span>
<span id="cb71-3"><a href="#cb71-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-51-1.png" width="960" class="r-stretch"></section>
<section id="продаж-кортикостероїдних-препаратів-8" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a>h02 <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(</span>
<span id="cb72-2"><a href="#cb72-2"></a>  <span class="fu">log</span>(Cost)</span>
<span id="cb72-3"><a href="#cb72-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-52-1.png" width="960" class="r-stretch"></section>
<section id="продаж-кортикостероїдних-препаратів-9" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a>h02 <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(</span>
<span id="cb73-2"><a href="#cb73-2"></a>  <span class="fu">log</span>(Cost) <span class="sc">%&gt;%</span> <span class="fu">difference</span>(<span class="dv">12</span>)</span>
<span id="cb73-3"><a href="#cb73-3"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-53-1.png" width="960" class="r-stretch"></section>
<section id="продаж-кортикостероїдних-препаратів-10" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1"></a>h02 <span class="sc">%&gt;%</span> <span class="fu">gg_tsdisplay</span>(<span class="fu">difference</span>(<span class="fu">log</span>(Cost),<span class="dv">12</span>),</span>
<span id="cb74-2"><a href="#cb74-2"></a>                 <span class="at">lag_max =</span> <span class="dv">36</span>, <span class="at">plot_type =</span> <span class="st">'partial'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/h02b-1.png" width="960" class="r-stretch"></section>
<section id="продаж-кортикостероїдних-препаратів-11" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<ul>
<li>Виберіть <span class="math inline">\(D=1\)</span> і <span class="math inline">\(d=0\)</span>.</li>
<li>Підйоми PACF на лагах 12 і 24 вказують на сезонний термін AR(2).</li>
<li>Підйоми PACF вказують на можливу несезонну AR(3).</li>
<li>Початкова модель кандидата: ARIMA(3,0,0)(2,1,0)<span class="math inline">\(_{12}\)</span>.</li>
</ul>
</section>
<section id="продаж-кортикостероїдних-препаратів-12" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:center;"> .model </th>
   <th style="text-align:center;"> AICc </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:center;"> ARIMA(3,0,1)(0,1,2)[12] </td>
   <td style="text-align:center;"> -485.48 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> ARIMA(3,0,1)(1,1,1)[12] </td>
   <td style="text-align:center;"> -484.25 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> ARIMA(3,0,1)(0,1,1)[12] </td>
   <td style="text-align:center;"> -483.67 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> ARIMA(3,0,1)(2,1,0)[12] </td>
   <td style="text-align:center;"> -476.31 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> ARIMA(3,0,0)(2,1,0)[12] </td>
   <td style="text-align:center;"> -475.12 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> ARIMA(3,0,2)(2,1,0)[12] </td>
   <td style="text-align:center;"> -474.88 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> ARIMA(3,0,1)(1,1,0)[12] </td>
   <td style="text-align:center;"> -463.40 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="продаж-кортикостероїдних-препаратів-13" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a>fit <span class="ot">&lt;-</span> h02 <span class="sc">%&gt;%</span></span>
<span id="cb75-2"><a href="#cb75-2"></a>  <span class="fu">model</span>(<span class="at">best =</span> <span class="fu">ARIMA</span>(<span class="fu">log</span>(Cost) <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">1</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>)))</span>
<span id="cb75-3"><a href="#cb75-3"></a><span class="fu">report</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: Cost 
Model: ARIMA(3,0,1)(0,1,2)[12] 
Transformation: log(Cost) 

Coefficients:
          ar1     ar2     ar3     ma1     sma1     sma2
      -0.1603  0.5481  0.5678  0.3827  -0.5222  -0.1768
s.e.   0.1636  0.0878  0.0942  0.1895   0.0861   0.0872

sigma^2 estimated as 0.004278:  log likelihood=250.04
AIC=-486.08   AICc=-485.48   BIC=-463.28</code></pre>
</div>
</div>
</section>
<section id="продаж-кортикостероїдних-препаратів-14" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a><span class="fu">gg_tsresiduals</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/h02res-1.png" width="960" class="r-stretch"></section>
<section id="продаж-кортикостероїдних-препаратів-15" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1"></a><span class="fu">augment</span>(fit) <span class="sc">%&gt;%</span></span>
<span id="cb78-2"><a href="#cb78-2"></a>  <span class="fu">features</span>(.innov, ljung_box, <span class="at">lag =</span> <span class="dv">36</span>, <span class="at">dof =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .model lb_stat lb_pvalue
  &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 best      50.7    0.0104</code></pre>
</div>
</div>
</section>
<section id="продаж-кортикостероїдних-препаратів-16" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1"></a>fit <span class="ot">&lt;-</span> h02 <span class="sc">%&gt;%</span> <span class="fu">model</span>(<span class="at">auto =</span> <span class="fu">ARIMA</span>(<span class="fu">log</span>(Cost)))</span>
<span id="cb80-2"><a href="#cb80-2"></a><span class="fu">report</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: Cost 
Model: ARIMA(2,1,0)(0,1,1)[12] 
Transformation: log(Cost) 

Coefficients:
          ar1      ar2     sma1
      -0.8491  -0.4207  -0.6401
s.e.   0.0712   0.0714   0.0694

sigma^2 estimated as 0.004387:  log likelihood=245.39
AIC=-482.78   AICc=-482.56   BIC=-469.77</code></pre>
</div>
</div>
</section>
<section id="продаж-кортикостероїдних-препаратів-17" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a><span class="fu">gg_tsresiduals</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-54-1.png" width="960" class="r-stretch"></section>
<section id="продаж-кортикостероїдних-препаратів-18" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a><span class="fu">augment</span>(fit) <span class="sc">%&gt;%</span></span>
<span id="cb83-2"><a href="#cb83-2"></a>  <span class="fu">features</span>(.innov, ljung_box, <span class="at">lag =</span> <span class="dv">36</span>, <span class="at">dof =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .model lb_stat lb_pvalue
  &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 auto      59.3   0.00332</code></pre>
</div>
</div>
</section>
<section id="продаж-кортикостероїдних-препаратів-19" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1"></a>fit <span class="ot">&lt;-</span> h02 <span class="sc">%&gt;%</span></span>
<span id="cb85-2"><a href="#cb85-2"></a>  <span class="fu">model</span>(<span class="at">best =</span> <span class="fu">ARIMA</span>(<span class="fu">log</span>(Cost), <span class="at">stepwise =</span> <span class="cn">FALSE</span>,</span>
<span id="cb85-3"><a href="#cb85-3"></a>                 <span class="at">approximation =</span> <span class="cn">FALSE</span>,</span>
<span id="cb85-4"><a href="#cb85-4"></a>                 <span class="at">order_constraint =</span> p <span class="sc">+</span> q <span class="sc">+</span> P <span class="sc">+</span> Q <span class="sc">&lt;=</span> <span class="dv">9</span>))</span>
<span id="cb85-5"><a href="#cb85-5"></a><span class="fu">report</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: Cost 
Model: ARIMA(4,1,1)(2,1,2)[12] 
Transformation: log(Cost) 

Coefficients:
          ar1     ar2     ar3      ar4      ma1    sar1     sar2     sma1
      -0.0425  0.2098  0.2017  -0.2273  -0.7424  0.6213  -0.3832  -1.2019
s.e.   0.2167  0.1813  0.1144   0.0810   0.2074  0.2421   0.1185   0.2491
        sma2
      0.4959
s.e.  0.2135

sigma^2 estimated as 0.004049:  log likelihood=254.31
AIC=-488.63   AICc=-487.4   BIC=-456.1</code></pre>
</div>
</div>
</section>
<section id="продаж-кортикостероїдних-препаратів-20" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1"></a><span class="fu">gg_tsresiduals</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/unnamed-chunk-56-1.png" width="960" class="r-stretch"></section>
<section id="продаж-кортикостероїдних-препаратів-21" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a><span class="fu">augment</span>(fit) <span class="sc">%&gt;%</span></span>
<span id="cb88-2"><a href="#cb88-2"></a>  <span class="fu">features</span>(.innov, ljung_box, <span class="at">lag =</span> <span class="dv">36</span>, <span class="at">dof =</span> <span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .model lb_stat lb_pvalue
  &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 best      36.5     0.106</code></pre>
</div>
</div>
</section>
<section id="продаж-кортикостероїдних-препаратів-22" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<p>Training data: July 1991 to June 2006</p>
<p>Test data: July 2006–June 2008</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a>fit <span class="ot">&lt;-</span> h02 <span class="sc">%&gt;%</span></span>
<span id="cb90-2"><a href="#cb90-2"></a>  <span class="fu">filter_index</span>(<span class="sc">~</span> <span class="st">"2006 Jun"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb90-3"><a href="#cb90-3"></a>  <span class="fu">model</span>(</span>
<span id="cb90-4"><a href="#cb90-4"></a>    <span class="fu">ARIMA</span>(<span class="fu">log</span>(Cost) <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">0</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>)),</span>
<span id="cb90-5"><a href="#cb90-5"></a>    <span class="fu">ARIMA</span>(<span class="fu">log</span>(Cost) <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>)),</span>
<span id="cb90-6"><a href="#cb90-6"></a>    <span class="fu">ARIMA</span>(<span class="fu">log</span>(Cost) <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">2</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>)),</span>
<span id="cb90-7"><a href="#cb90-7"></a>    <span class="fu">ARIMA</span>(<span class="fu">log</span>(Cost) <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb90-8"><a href="#cb90-8"></a>    <span class="co"># ... #</span></span>
<span id="cb90-9"><a href="#cb90-9"></a>  )</span>
<span id="cb90-10"><a href="#cb90-10"></a></span>
<span id="cb90-11"><a href="#cb90-11"></a>fit <span class="sc">%&gt;%</span></span>
<span id="cb90-12"><a href="#cb90-12"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">"2 years"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb90-13"><a href="#cb90-13"></a>  <span class="fu">accuracy</span>(h02)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="продаж-кортикостероїдних-препаратів-23" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode" data-hash="08_cache/revealjs/h02-rmse_925e2349db583ca9da45eada39c25e57">
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:left;"> .model </th>
   <th style="text-align:right;"> RMSE </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> ARIMA(3,0,1)(1,1,1)[12] </td>
   <td style="text-align:right;"> 0.0619 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ARIMA(3,0,1)(0,1,2)[12] </td>
   <td style="text-align:right;"> 0.0621 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ARIMA(3,0,1)(0,1,1)[12] </td>
   <td style="text-align:right;"> 0.0630 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ARIMA(2,1,0)(0,1,1)[12] </td>
   <td style="text-align:right;"> 0.0630 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ARIMA(4,1,1)(2,1,2)[12] </td>
   <td style="text-align:right;"> 0.0631 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ARIMA(3,0,2)(2,1,0)[12] </td>
   <td style="text-align:right;"> 0.0651 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ARIMA(3,0,1)(2,1,0)[12] </td>
   <td style="text-align:right;"> 0.0653 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ARIMA(3,0,1)(1,1,0)[12] </td>
   <td style="text-align:right;"> 0.0666 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ARIMA(3,0,0)(2,1,0)[12] </td>
   <td style="text-align:right;"> 0.0668 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="продаж-кортикостероїдних-препаратів-24" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<ul>
<li>Моделі з найнижчими значеннями AICc зазвичай дають трохи кращі результати, ніж інші моделі.</li>
<li>Порівняння AICc повинні мати однаковий порядок відмінностей. Але порівняння набору тестів RMSE може включати будь-які моделі.</li>
<li>Використовуйте найкращу доступну модель, навіть якщо вона не пройшла всі тести.</li>
</ul>
</section>
<section id="продаж-кортикостероїдних-препаратів-25" class="slide level2">
<h2>Продаж кортикостероїдних препаратів</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1"></a>fit <span class="ot">&lt;-</span> h02 <span class="sc">%&gt;%</span></span>
<span id="cb91-2"><a href="#cb91-2"></a>  <span class="fu">model</span>(<span class="fu">ARIMA</span>(Cost <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">1</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>)))</span>
<span id="cb91-3"><a href="#cb91-3"></a>fit <span class="sc">%&gt;%</span> forecast <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(h02) <span class="sc">+</span></span>
<span id="cb91-4"><a href="#cb91-4"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"H02 Expenditure ($AUD)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/h02f-1.png" width="960" class="r-stretch"></section></section>
<section>
<section id="arima-vs-ets" class="title-slide slide level1 center">
<h1>ARIMA vs ETS</h1>

</section>
<section id="arima-vs-ets-1" class="slide level2">
<h2>ARIMA vs ETS</h2>
<ul>
<li>Міф про те, що моделі ARIMA є більш загальними, ніж експоненціальне згладжування.
<ul>
<li>Моделі лінійного експоненціального згладжування, усі окремі випадки моделей ARIMA.</li>
<li>Моделі нелінійного експоненційного згладжування не мають аналогів ARIMA.</li>
<li>Багато моделей ARIMA не мають аналогів експоненціального згладжування.</li>
<li>Моделі ETS всі нестаціонарні. Моделі з сезонністю або незатухаючим трендом (або обома) мають два одиничних кореня; всі інші моделі мають одну одиницю корінь.</li>
</ul></li>
</ul>
</section>
<section id="arima-vs-ets-2" class="slide level2">
<h2>ARIMA vs ETS</h2>

<img data-src="08_files/figure-revealjs/venn-1.png" width="960" class="r-stretch"></section>
<section id="еквівалентності" class="slide level2">
<h2>Еквівалентності</h2>
<table>
<colgroup>
<col style="width: 17%">
<col style="width: 35%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>ETS model</strong></th>
<th style="text-align: left;"><strong>ARIMA model</strong></th>
<th style="text-align: left;"><strong>Parameters</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ETS(A,N,N)</td>
<td style="text-align: left;">ARIMA(0,1,1)</td>
<td style="text-align: left;"><span class="math inline">\(\theta_1 = \alpha-1\)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">ETS(A,A,N)</td>
<td style="text-align: left;">ARIMA(0,2,2)</td>
<td style="text-align: left;"><span class="math inline">\(\theta_1 = \alpha+\beta-2\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><span class="math inline">\(\theta_2 = 1-\alpha\)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">ETS(A,A,N)</td>
<td style="text-align: left;">ARIMA(1,1,2)</td>
<td style="text-align: left;"><span class="math inline">\(\phi_1=\phi\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><span class="math inline">\(\theta_1 = \alpha+\phi\beta-1-\phi\)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><span class="math inline">\(\theta_2 = (1-\alpha)\phi\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">ETS(A,N,A)</td>
<td style="text-align: left;">ARIMA(0,0,<span class="math inline">\(m\)</span>)(0,1,0)<span class="math inline">\(_m\)</span></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">ETS(A,A,A)</td>
<td style="text-align: left;">ARIMA(0,1,<span class="math inline">\(m+1\)</span>)(0,1,0)<span class="math inline">\(_m\)</span></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">ETS(A,A,A)</td>
<td style="text-align: left;">ARIMA(1,0,<span class="math inline">\(m+1\)</span>)(0,1,0)<span class="math inline">\(_m\)</span></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</section>
<section id="приклад-населення-австралії" class="slide level2">
<h2>Приклад: населення Австралії</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1"></a>aus_economy <span class="ot">&lt;-</span> global_economy <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">"AUS"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb92-2"><a href="#cb92-2"></a>  <span class="fu">mutate</span>(<span class="at">Population =</span> Population<span class="sc">/</span><span class="fl">1e6</span>)</span>
<span id="cb92-3"><a href="#cb92-3"></a>aus_economy <span class="sc">%&gt;%</span></span>
<span id="cb92-4"><a href="#cb92-4"></a>  <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb92-5"><a href="#cb92-5"></a>  <span class="fu">stretch_tsibble</span>(<span class="at">.init =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb92-6"><a href="#cb92-6"></a>  <span class="fu">model</span>(<span class="at">ets =</span> <span class="fu">ETS</span>(Population),</span>
<span id="cb92-7"><a href="#cb92-7"></a>        <span class="at">arima =</span> <span class="fu">ARIMA</span>(Population)</span>
<span id="cb92-8"><a href="#cb92-8"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb92-9"><a href="#cb92-9"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb92-10"><a href="#cb92-10"></a>  <span class="fu">accuracy</span>(aus_economy) <span class="sc">%&gt;%</span></span>
<span id="cb92-11"><a href="#cb92-11"></a>  <span class="fu">select</span>(.model, ME<span class="sc">:</span>RMSSE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 8
  .model     ME   RMSE    MAE   MPE  MAPE  MASE RMSSE
  &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 arima  0.0420 0.194  0.0789 0.277 0.509 0.317 0.746
2 ets    0.0202 0.0774 0.0543 0.112 0.327 0.218 0.298</code></pre>
</div>
</div>
</section>
<section id="приклад-населення-австралії-1" class="slide level2">
<h2>Приклад: населення Австралії</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1"></a>aus_economy <span class="sc">%&gt;%</span></span>
<span id="cb94-2"><a href="#cb94-2"></a>  <span class="fu">model</span>(<span class="fu">ETS</span>(Population)) <span class="sc">%&gt;%</span></span>
<span id="cb94-3"><a href="#cb94-3"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">"5 years"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb94-4"><a href="#cb94-4"></a>  <span class="fu">autoplot</span>(aus_economy) <span class="sc">+</span></span>
<span id="cb94-5"><a href="#cb94-5"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Australian population"</span>,  <span class="at">y =</span> <span class="st">"People (millions)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/popetsplot-1.png" width="960" class="r-stretch"></section>
<section id="приклад-виробництво-цементу" class="slide level2">
<h2>Приклад: виробництво цементу</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1"></a>cement <span class="ot">&lt;-</span> aus_production <span class="sc">%&gt;%</span></span>
<span id="cb95-2"><a href="#cb95-2"></a>  <span class="fu">select</span>(Cement) <span class="sc">%&gt;%</span></span>
<span id="cb95-3"><a href="#cb95-3"></a>  <span class="fu">filter_index</span>(<span class="st">"1988 Q1"</span> <span class="sc">~</span> .)</span>
<span id="cb95-4"><a href="#cb95-4"></a>train <span class="ot">&lt;-</span> cement <span class="sc">%&gt;%</span> <span class="fu">filter_index</span>(. <span class="sc">~</span> <span class="st">"2007 Q4"</span>)</span>
<span id="cb95-5"><a href="#cb95-5"></a>fit <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span></span>
<span id="cb95-6"><a href="#cb95-6"></a>  <span class="fu">model</span>(</span>
<span id="cb95-7"><a href="#cb95-7"></a>    <span class="at">arima =</span> <span class="fu">ARIMA</span>(Cement),</span>
<span id="cb95-8"><a href="#cb95-8"></a>    <span class="at">ets =</span> <span class="fu">ETS</span>(Cement)</span>
<span id="cb95-9"><a href="#cb95-9"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="приклад-виробництво-цементу-1" class="slide level2">
<h2>Приклад: виробництво цементу</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1"></a>fit <span class="sc">%&gt;%</span></span>
<span id="cb96-2"><a href="#cb96-2"></a>  <span class="fu">select</span>(arima) <span class="sc">%&gt;%</span></span>
<span id="cb96-3"><a href="#cb96-3"></a>  <span class="fu">report</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: Cement 
Model: ARIMA(1,0,1)(2,1,1)[4] w/ drift 

Coefficients:
         ar1      ma1   sar1     sar2     sma1  constant
      0.8886  -0.2366  0.081  -0.2345  -0.8979    5.3884
s.e.  0.0842   0.1334  0.157   0.1392   0.1780    1.4844

sigma^2 estimated as 11456:  log likelihood=-463.52
AIC=941.03   AICc=942.68   BIC=957.35</code></pre>
</div>
</div>
</section>
<section id="приклад-виробництво-цементу-2" class="slide level2">
<h2>Приклад: виробництво цементу</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1"></a>fit <span class="sc">%&gt;%</span> <span class="fu">select</span>(ets) <span class="sc">%&gt;%</span> <span class="fu">report</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: Cement 
Model: ETS(M,N,M) 
  Smoothing parameters:
    alpha = 0.7533714 
    gamma = 0.0001000093 

  Initial states:
     l[0]     s[0]    s[-1]    s[-2]     s[-3]
 1694.712 1.031179 1.045209 1.011424 0.9121874

  sigma^2:  0.0034

     AIC     AICc      BIC 
1104.095 1105.650 1120.769 </code></pre>
</div>
</div>
</section>
<section id="приклад-виробництво-цементу-3" class="slide level2">
<h2>Приклад: виробництво цементу</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1"></a><span class="fu">gg_tsresiduals</span>(fit <span class="sc">%&gt;%</span> <span class="fu">select</span>(arima), <span class="at">lag_max =</span> <span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/qcement4-1.png" width="960" class="r-stretch"></section>
<section id="приклад-виробництво-цементу-4" class="slide level2">
<h2>Приклад: виробництво цементу</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1"></a><span class="fu">gg_tsresiduals</span>(fit <span class="sc">%&gt;%</span> <span class="fu">select</span>(ets), <span class="at">lag_max =</span> <span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/qcement5-1.png" width="960" class="r-stretch"></section>
<section id="приклад-виробництво-цементу-5" class="slide level2">
<h2>Приклад: виробництво цементу</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1"></a>fit <span class="sc">%&gt;%</span></span>
<span id="cb102-2"><a href="#cb102-2"></a>  <span class="fu">select</span>(arima) <span class="sc">%&gt;%</span></span>
<span id="cb102-3"><a href="#cb102-3"></a>  <span class="fu">augment</span>() <span class="sc">%&gt;%</span></span>
<span id="cb102-4"><a href="#cb102-4"></a>  <span class="fu">features</span>(.innov, ljung_box, <span class="at">lag =</span> <span class="dv">16</span>, <span class="at">dof =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .model lb_stat lb_pvalue
  &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 arima     6.37     0.783</code></pre>
</div>
</div>
</section>
<section id="приклад-виробництво-цементу-6" class="slide level2">
<h2>Приклад: виробництво цементу</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1"></a>fit <span class="sc">%&gt;%</span></span>
<span id="cb104-2"><a href="#cb104-2"></a>  <span class="fu">select</span>(ets) <span class="sc">%&gt;%</span></span>
<span id="cb104-3"><a href="#cb104-3"></a>  <span class="fu">augment</span>() <span class="sc">%&gt;%</span></span>
<span id="cb104-4"><a href="#cb104-4"></a>  <span class="fu">features</span>(.innov, ljung_box, <span class="at">lag =</span> <span class="dv">16</span>, <span class="at">dof =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .model lb_stat lb_pvalue
  &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 ets       10.0     0.438</code></pre>
</div>
</div>
</section>
<section id="приклад-виробництво-цементу-7" class="slide level2">
<h2>Приклад: виробництво цементу</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1"></a>fit <span class="sc">%&gt;%</span></span>
<span id="cb106-2"><a href="#cb106-2"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">"2 years 6 months"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb106-3"><a href="#cb106-3"></a>  <span class="fu">accuracy</span>(cement) <span class="sc">%&gt;%</span></span>
<span id="cb106-4"><a href="#cb106-4"></a>  <span class="fu">select</span>(<span class="sc">-</span>ME, <span class="sc">-</span>MPE, <span class="sc">-</span>ACF1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 7
  .model .type  RMSE   MAE  MAPE  MASE RMSSE
  &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 arima  Test   216.  186.  8.68  1.27  1.26
2 ets    Test   222.  191.  8.85  1.30  1.29</code></pre>
</div>
</div>
</section>
<section id="приклад-виробництво-цементу-8" class="slide level2">
<h2>Приклад: виробництво цементу</h2>
<div class="cell light-mode">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1"></a>fit <span class="sc">%&gt;%</span></span>
<span id="cb108-2"><a href="#cb108-2"></a>  <span class="fu">select</span>(arima) <span class="sc">%&gt;%</span></span>
<span id="cb108-3"><a href="#cb108-3"></a>  <span class="fu">forecast</span>(<span class="at">h=</span><span class="st">"3 years"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb108-4"><a href="#cb108-4"></a>  <span class="fu">autoplot</span>(cement) <span class="sc">+</span></span>
<span id="cb108-5"><a href="#cb108-5"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Cement production in Australia"</span>, <span class="at">y=</span><span class="st">"Tonnes ('000)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="08_files/figure-revealjs/qcement9-1.png" width="960" class="r-stretch"></section></section>
<section id="дякую-за-увагу" class="title-slide slide level1 unnumbered unlisted center">
<h1>Дякую за увагу!</h1>
<p><br> <br></p>
<p><svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M464 64C490.5 64 512 85.49 512 112C512 127.1 504.9 141.3 492.8 150.4L275.2 313.6C263.8 322.1 248.2 322.1 236.8 313.6L19.2 150.4C7.113 141.3 0 127.1 0 112C0 85.49 21.49 64 48 64H464zM217.6 339.2C240.4 356.3 271.6 356.3 294.4 339.2L512 176V384C512 419.3 483.3 448 448 448H64C28.65 448 0 419.3 0 384V176L217.6 339.2z"></path></svg> ihor.miroshnychenko@kneu.ua</p>
<p><svg aria-hidden="true" role="img" viewbox="0 0 576 512" style="height:1em;width:1.12em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M575.8 255.5C575.8 273.5 560.8 287.6 543.8 287.6H511.8L512.5 447.7C512.5 450.5 512.3 453.1 512 455.8V472C512 494.1 494.1 512 472 512H456C454.9 512 453.8 511.1 452.7 511.9C451.3 511.1 449.9 512 448.5 512H392C369.9 512 352 494.1 352 472V384C352 366.3 337.7 352 320 352H256C238.3 352 224 366.3 224 384V472C224 494.1 206.1 512 184 512H128.1C126.6 512 125.1 511.9 123.6 511.8C122.4 511.9 121.2 512 120 512H104C81.91 512 64 494.1 64 472V360C64 359.1 64.03 358.1 64.09 357.2V287.6H32.05C14.02 287.6 0 273.5 0 255.5C0 246.5 3.004 238.5 10.01 231.5L266.4 8.016C273.4 1.002 281.4 0 288.4 0C295.4 0 303.4 2.004 309.5 7.014L564.8 231.5C572.8 238.5 576.9 246.5 575.8 255.5L575.8 255.5z"></path></svg> <a href="https://aranaur.rbind.io">aranaur.rbind.io</a></p>
<p><svg aria-hidden="true" role="img" viewbox="0 0 496 512" style="height:1em;width:0.97em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> <a href="https://github.com/Aranaur">@aranaur</a></p>
<p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg> <a href="https://www.linkedin.com/in/ihormiroshnychenko/">@ihormiroshnychenko</a></p>
<p><svg aria-hidden="true" role="img" viewbox="0 0 496 512" style="height:1em;width:0.97em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M248 8C111 8 0 119 0 256S111 504 248 504 496 392.1 496 256 384.1 8 248 8zM362.1 176.7c-3.732 39.22-19.88 134.4-28.1 178.3-3.476 18.58-10.32 24.82-16.95 25.42-14.4 1.326-25.34-9.517-39.29-18.66-21.83-14.31-34.16-23.22-55.35-37.18-24.49-16.14-8.612-25 5.342-39.5 3.652-3.793 67.11-61.51 68.33-66.75 .153-.655 .3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283 .746-104.6 69.14-14.85 10.19-26.89 9.934c-8.855-.191-25.89-5.006-38.55-9.123-15.53-5.048-27.88-7.717-26.8-16.29q.84-6.7 18.45-13.7 108.4-47.25 144.6-62.3c68.87-28.65 83.18-33.62 92.51-33.79 2.052-.034 6.639 .474 9.61 2.885a10.45 10.45 0 0 1 3.53 6.716A43.76 43.76 0 0 1 362.1 176.7z"></path></svg> <a href="https://t.me/araprof">Data Mirosh</a></p>

<img src="img/logo.png" class="slide-logo r-stretch"><div class="footer footer-default">
<p><a href="https://t.me/araprof">Data Mirosh</a></p>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="08_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="08_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="08_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="08_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="08_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="08_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="08_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="08_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="08_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="08_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="08_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: true,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>